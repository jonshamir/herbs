{"version":3,"sources":["components/HerbTree/graphUtils.js","components/FadeInOut/FadeInOut.js","components/Button/Button.js","pages/HomePage/HomePage.js","pages/IntroPage/IntroPage.js","components/HerbSummary/HerbSummary.js","pages/HerbPage/HerbPage.js","components/HerbTree/HerbTree.js","components/Search/Search.js","App.js","reportWebVitals.js","index.js","utils/math.js"],"names":["simulation","rootNode","graphEl","hoverTimer","FadeInOut","children","rest","motion","div","initial","opacity","animate","exit","Nav","className","HomePage","props","handleScroll","currScroll","document","body","scrollTop","documentElement","scrollHeight","clientHeight","state","logoOpacity","setState","handleNodeClick","node","history","push","slug","window","addEventListener","this","scrollRestoration","removeEventListener","to","style","React","Component","withRouter","renderPage","page","setPage","onClick","backgroundImage","IntroPage","useState","AnimatePresence","exitBeforeEnter","HerbSummary","herb","family","altNames","src","alt","colSpan","name","commonName","lifeform","lifecycle","HerbPage","md","a","match","params","fetch","response","text","herbInfo","filter","familyName","taxonomy","find","rank","hasOwnProperty","Familia","familyInfo","toLowerCase","description","width","height","imageSize","mousePos","x","y","setupSimulation","nodes","links","d3","alphaDecay","alphaMin","force","id","d","distance","strength","forceManyBodyReuse","radius","offsetX","alpha","forEach","fixed","dist","dist2D","invDist","Math","pow","clamp01","deltaX","deltaY","dir","normalize2D","getNodeLabel","data","drawGraph","ref","svg","current","append","attr","link","selectAll","join","classed","on","collisionRadius","handleMouseMove","setupTooltip","tooltipRef","tooltipContainer","tooltip","setupInteractions","parentComponent","e","setTimeout","raise","setSubtreeActive","isActive","source","nodeInfo","html","transition","duration","onHover","clearTimeout","handleClick","enteranceTransition","growthTime","linkLength","delay","depth","ease","end","then","random","root","target","event","offsetY","restart","HerbTree","d3ref","createRef","setGraphSize","taxonomyTreePruned","applyNodeOverrides","removeSingleChildren","JSON","parse","stringify","taxonomyTree","descendants","i","initialNodePositions","fx","fy","transform","parent","angle","radToDeg","atan2","xPos","yPos","label","length","graph","scrollTo","handleResize","onNodeClick","w","h","alphaTarget","updateGraphSize","clientWidth","min","nodePositions","console","log","isMinimal","isHidden","classNames","stop","taxonomyTreeOverrides","overrideNode","en","getMatchedName","query","allNames","split","unshift","enNames","matchIndex","concat","findIndex","prefix","reduce","containsPrefix","word","slice","matchName","getMatchIndex","getSuggestions","value","inputValue","trim","map","sort","h1","h2","getSuggestionValue","suggestion","renderSuggestion","suggestionText","matches","AutosuggestMatch","parts","AutosuggestParse","part","index","highlight","Search","isSuggestionHighlighted","suggestions","highlightedSuggestion","some","s","onChange","newValue","onSuggestionsFetchRequested","onSuggestionsClearRequested","onSuggestionSelected","goToResult","onSuggestionHighlighted","onKeyDown","key","inputProps","placeholder","App","useHistory","location","useLocation","pathname","exact","path","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","getElementById","defined","require","EPSILON","Number","clamp","max","lerp","t","inverseLerp","abs","toFinite","n","defaultValue","isFinite","expandVector","dims","TypeError","p","scalar","out","lerpArray","newArray","initialValue","mod","b","damp","lambda","dt","exp","len2D","sqrt","module","exports","fract","floor","sign","degToRad","PI","pingPong","linspace","opts","endpoint","offset","_","lerpFrames","values","len","whole","frame","nextFrame","Array","isArray","v","smoothstep","dampArray","mapRange","inputMin","inputMax","outputMin","outputMax","outVal","expand2D","expand3D","expand4D","v1","v2"],"mappings":"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","file":"static/js/main.7e651bbb.chunk.js","sourcesContent":["import * as d3 from \"d3\";\nimport { forceManyBodyReuse } from \"d3-force-reuse\";\nimport { radToDeg, normalize2D, dist2D, clamp01 } from \"../../utils/math\";\n\nimport herbInfo from \"../../data/herbInfo.json\";\nimport familyInfo from \"../../data/familyInfo.json\";\nimport initialNodePositions from \"../../data/initialNodePositions.json\";\n\nimport lang from \"../../lang\";\n\nlet width = 400;\nlet height = 400;\n// const marginX = 15;\nconst marginY = 30;\nconst offsetX = 0;\nconst imageSize = 40;\nconst collisionRadius = 16;\n\nlet simulation;\nlet rootNode;\nlet graphEl;\nlet mousePos = { x: -1, y: -1 };\n\nexport const graph = (ref, tooltipRef, data, parentComponent) => {\n  rootNode = d3.hierarchy(data);\n  const links = rootNode.links();\n  const nodes = rootNode.descendants();\n  nodes.forEach((node, i) => {\n    const { id } = node.data;\n    if (id !== 1000 && initialNodePositions[id]) {\n      const { x, y } = initialNodePositions[id];\n      node.x = x;\n      node.y = y;\n    }\n  });\n\n  rootNode.fixed = true;\n  rootNode.fx = offsetX;\n  rootNode.fy = 0.5 * height - 1 * marginY;\n\n  simulation = setupSimulation(nodes, links);\n\n  const { svg, link, node, text } = drawGraph(ref, simulation, nodes, links);\n  graphEl = svg.node();\n\n  const { tooltipContainer, tooltip } = setupTooltip(tooltipRef);\n\n  // Enterance transition\n  setTimeout(() => {\n    enteranceTransition(link, svg);\n    setupInteractions(\n      svg,\n      link,\n      node,\n      text,\n      tooltip,\n      tooltipContainer,\n      parentComponent\n    );\n  }, 1000);\n\n  simulation.on(\"tick\", (e) => {\n    node.attr(\"transform\", (d) => {\n      let transform = `translate(${d.x},${d.y})`;\n      if (!d.children) {\n        const deltaX = d.x - d.parent.x;\n        const deltaY = d.y - d.parent.y;\n        const angle = radToDeg(Math.atan2(deltaY, deltaX)) + 90;\n        transform += ` rotate(${angle})`;\n      }\n      return transform;\n    });\n\n    text.attr(\"transform\", (d) => {\n      let xPos = d.x;\n      let yPos = d.y;\n      if (!d.children) {\n        // Leaf nodes\n        const label = getNodeLabel(d);\n        const deltaX = d.x - d.parent.x;\n        const deltaY = d.y - d.parent.y;\n        const dir = normalize2D(deltaX, deltaY);\n        xPos += dir.x * (imageSize * 0.5 + label.length * 1.5);\n        yPos += dir.y * imageSize * 0.5;\n      }\n\n      return `translate(${xPos},${yPos})`;\n    });\n\n    link\n      .attr(\"x1\", (d) => d.source.x)\n      .attr(\"y1\", (d) => d.source.y)\n      .attr(\"x2\", (d) => d.target.x)\n      .attr(\"y2\", (d) => d.target.y);\n  });\n\n  return simulation;\n};\n\nexport const setupSimulation = (nodes, links) => {\n  return d3\n    .forceSimulation(nodes)\n    .alphaDecay(0.05)\n    .alphaMin(0.01)\n    .force(\n      \"link\",\n      d3\n        .forceLink(links)\n        .id((d) => d.id)\n        .distance(40)\n        .strength(0.5)\n    )\n    .force(\"charge\", forceManyBodyReuse().strength(-80))\n    .force(\n      \"collision\",\n      d3.forceCollide().radius((d) => (d.children ? 2 : collisionRadius))\n    )\n    .force(\"x\", d3.forceX(offsetX / 4))\n    .force(\"y\", d3.forceY())\n    .force(\"mouse\", (alpha) => {\n      nodes.forEach((d) => {\n        if (mousePos.x !== -1 && !d.fixed) {\n          const dist = dist2D(d, mousePos);\n          if (dist < 25) {\n            // Snap to cursor\n          } else if (dist < 250) {\n            const invDist = Math.pow(clamp01(1 - (6 * dist) / height), 2);\n            const deltaX = d.x - mousePos.x;\n            const deltaY = d.y - mousePos.y;\n            const dir = normalize2D(deltaX, deltaY);\n            d.x += dir.x * invDist * 12 * alpha;\n            d.y += dir.y * invDist * 12 * alpha;\n          }\n        }\n      });\n    });\n  /*\n    .force(\"growth\", (alpha) => {\n      const multiplier = Math.pow(alpha, 1);\n\n      nodes.forEach((node) => {\n        // Cause nodes to be above their parents\n        if (node.parent && node.y > node.parent.y - 1000) {\n          node.y -= multiplier * 6;\n        }\n      });\n    })\n    .force(\"bounding\", (alpha) => {\n      nodes.forEach((node) => {\n        const wallRepulsionX =\n          alpha *\n          Math.max(1, Math.abs(node.x + offsetX) - (width / 2 - marginX));\n        node.x -= Math.sign(node.x) * wallRepulsionX;\n        // const wallRepulsionY =\n        //   alpha * Math.max(1, Math.abs(node.y) - (height / 2 - marginY));\n        // node.y -= Math.sign(node.y) * wallRepulsionY;\n      });\n    });*/\n};\n\nconst getNodeLabel = (d) => {\n  if (d.children) return `${d.data.name}`;\n  else return herbInfo[d.data.id].commonName[lang];\n};\n\nexport const drawGraph = (ref, simulation, nodes, links) => {\n  const svg = d3\n    .select(ref.current)\n    .append(\"svg\")\n    .attr(\"class\", \"graphContainer\")\n    .attr(\"viewBox\", [-width / 2, -height / 2, width, height]);\n\n  const link = svg\n    .append(\"g\")\n    .selectAll(\"line\")\n    .data(links)\n    .join(\"line\")\n    .attr(\"class\", \"link\")\n    .attr(\"opacity\", 0);\n\n  const node = svg\n    .append(\"g\")\n    .selectAll(\"g\")\n    .data(nodes)\n    .join(\"g\")\n    .attr(\"class\", (d) => `node node-${d.data.slug}`)\n    .classed(\"internode\", (d) => d.children)\n    .classed(\"family\", (d) => d.data.slug in familyInfo)\n    .classed(\"leaf\", (d) => !d.children)\n    .attr(\"id\", (d) => d.data.id);\n\n  // Internode\n  node\n    .filter((d) => d.children)\n    .append(\"circle\")\n    .attr(\"r\", (d) => (d.data.slug in familyInfo ? 2 : 1.5))\n    .attr(\"opacity\", 0);\n\n  // Internode click areas\n  node\n    .filter((d) => d.children)\n    .append(\"circle\")\n    .attr(\"r\", 18)\n    .attr(\"fill-opacity\", 0)\n    .attr(\"stroke-width\", 0);\n\n  // Leaf images\n  node\n    .filter((d) => !d.children)\n    .append(\"svg:image\")\n    .attr(\"xlink:href\", (d) => `/images/icons/${d.data.slug}.png`)\n    .attr(\"class\", (d) => `image-${d.data.slug}`)\n    .on(\"error\", function (d) {\n      d3.select(this).attr(\"xlink:href\", \"/images/herb.png\");\n    })\n    .attr(\"x\", -imageSize / 2)\n    .attr(\"y\", -imageSize / 2)\n    .attr(\"width\", imageSize)\n    .attr(\"height\", imageSize)\n    .attr(\"transform\", \"scale(0.01)\");\n\n  // Leaf circle overlays\n  node\n    .filter((d) => !d.children)\n    .append(\"circle\")\n    .attr(\"r\", collisionRadius + 4);\n\n  // Mouse hover effect\n  svg.on(\"mousemove\", handleMouseMove);\n\n  // Leaf text\n  const text = svg\n    .append(\"g\")\n    .attr(\"class\", \"textGroup\")\n    .selectAll(\"g\")\n    .data(nodes)\n    .join(\"g\")\n    .append(\"text\")\n    .text(getNodeLabel)\n    .attr(\"class\", \"nodeText\")\n    .classed(\"visible\", (d) => !d.children)\n    .attr(\"text-anchor\", \"middle\")\n    .attr(\"y\", (d) => (d.children ? -5 : 0))\n    .attr(\"opacity\", 0);\n  return { svg, link, node, text };\n};\n\nexport const setupTooltip = (tooltipRef) => {\n  const tooltipContainer = d3.select(tooltipRef.current);\n\n  const tooltip = tooltipContainer\n    .append(\"div\")\n    .attr(\"class\", \"tooltip\")\n    .style(\"opacity\", 0);\n\n  return { tooltipContainer, tooltip };\n};\n\nconst onHover = (d, svg, link, node, text, tooltip, tooltipContainer) => {\n  const { slug, name, rank } = d.data;\n\n  if (d.children) {\n    // console.log(d3.select(`.node-${slug}`));\n    d3.select(`.node-${slug}`).raise();\n    svg.classed(\"inactive\", true);\n    // text.filter((d) => d.data.id === id).classed(\"visible\", true);\n\n    setSubtreeActive(d, true);\n\n    node.classed(\"active\", (d) => d.isActive);\n    text.classed(\"active\", (d) => d.isActive);\n    link.classed(\"active\", (d) => d.source.isActive);\n\n    const nodeInfo = familyInfo[slug];\n\n    if (nodeInfo) {\n      tooltip.html(\n        `<h4>${nodeInfo.name[lang]} /<span> ${rank[lang]}</span></h4><p>${nodeInfo.description[lang]}</p>`\n      );\n    } else {\n      tooltip.html(`<h4>${name} /<span> ${rank[lang]}</span></h4>`);\n    }\n    tooltipContainer.attr(\n      \"style\",\n      `transform: translate(${2 * d.x}px,${2 * d.y}px)`\n    );\n    tooltip.transition().duration(300).style(\"opacity\", 1);\n  } else {\n    // d3.select(`.image-${slug}`).attr(\"transform\", `scale(1.1)`);\n  }\n};\n\nlet hoverTimer;\n\nexport const setupInteractions = (\n  svg,\n  link,\n  node,\n  text,\n  tooltip,\n  tooltipContainer,\n  parentComponent\n) => {\n  node\n    .on(\"mouseover\", (e, d) => {\n      hoverTimer = setTimeout(() => {\n        onHover(d, svg, link, node, text, tooltip, tooltipContainer);\n      }, 300);\n    })\n    .on(\"mouseout\", (e, d) => {\n      clearTimeout(hoverTimer);\n      if (d.children) {\n        svg.classed(\"inactive\", false);\n        setSubtreeActive(d, false);\n\n        const { id } = d.data;\n        text.filter((d) => d.data.id === id).classed(\"visible\", false);\n\n        tooltip.transition().duration(200).style(\"opacity\", 0);\n      } else {\n        // d3.select(`.image-${slug}`).attr(\"transform\", `scale(1)`);\n      }\n    })\n    .on(\"click\", (e, d) => {\n      parentComponent.handleClick(e, d);\n    });\n};\n\nexport const enteranceTransition = (link, svg) => {\n  const growthTime = 400;\n  link\n    .attr(\"opacity\", 1)\n    .attr(\"stroke-dasharray\", (d) => linkLength(d) + \" \" + linkLength(d))\n    .attr(\"stroke-dashoffset\", (d) => linkLength(d))\n    .transition()\n    .delay((d) => d.source.depth * growthTime - 100)\n    .duration((d) => growthTime)\n    .ease(d3.easeLinear)\n    .attr(\"stroke-dashoffset\", 0)\n    .end()\n    .then(function (e) {\n      link.attr(\"stroke-dasharray\", \"none\");\n    });\n\n  svg\n    .selectAll(\"circle, text\")\n    .transition()\n    .delay((d) => d.depth * growthTime + 500)\n    .duration(growthTime)\n    .attr(\"opacity\", 1);\n\n  svg\n    .selectAll(\"image\")\n    // .attr(\"opacity\", 1)\n    .transition()\n    .delay((d) => d.depth * growthTime + 600 * Math.random() - 300)\n    .duration(growthTime)\n    .attr(\"transform\", \"scale(1)\");\n};\n\nconst setSubtreeActive = (root, isActive) => {\n  root.isActive = isActive;\n  root.children && root.children.forEach((d) => setSubtreeActive(d, isActive));\n};\n\nconst linkLength = (link) => {\n  return dist2D(link.source, link.target) + 3;\n};\n\nexport const updateGraphSize = (w, h) => {\n  width = w / 2;\n  height = h;\n  d3.select(graphEl).attr(\"viewBox\", [-width / 2, -height / 2, width, height]);\n  if (simulation) {\n    simulation.alphaTarget(0.1).restart();\n\n    rootNode.fx = offsetX;\n    rootNode.fy = 0.5 * height - 1 * marginY;\n  }\n};\n\nfunction handleMouseMove(event) {\n  const { x, offsetY } = event;\n  mousePos = {\n    x: (x - width) / 2,\n    y: (offsetY - height) / 2,\n  };\n  simulation.alpha(0.2).restart();\n}\n\n/*\nconst drag = (simulation) => {\n  function dragstarted(event, d) {\n    if (!event.active) simulation.alphaTarget(0.3).restart();\n    d.fx = d.x;\n    d.fy = d.y;\n  }\n\n  function dragged(event, d) {\n    d.fx = event.x;\n    d.fy = event.y;\n  }\n\n  function dragended(event, d) {\n    if (!event.active) simulation.alphaTarget(0);\n    d.fx = null;\n    d.fy = null;\n  }\n\n  return d3\n    .drag()\n    .on(\"start\", dragstarted)\n    .on(\"drag\", dragged)\n    .on(\"end\", dragended);\n};\n*/\n","import React from \"react\";\nimport { motion } from \"framer-motion\";\n\nconst FadeInOut = ({ children, ...rest }) => {\n  return (\n    <motion.div\n      {...rest}\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      exit={{ opacity: 0 }}\n    >\n      {children}\n    </motion.div>\n  );\n};\n\nexport default FadeInOut;\n","import React from \"react\";\n\nimport \"./Button.scss\";\n\nconst Nav = ({ children, ...rest }) => {\n  return (\n    <button {...rest} className=\"Button\">\n      {children}\n    </button>\n  );\n};\n\nexport default Nav;\n","import React from \"react\";\nimport { withRouter, Link } from \"react-router-dom\";\n\nimport FadeInOut from \"../../components/FadeInOut/FadeInOut\";\nimport Button from \"../../components/Button/Button\";\n\nimport \"./HomePage.scss\";\n\nclass HomePage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { logoOpacity: 1 };\n  }\n\n  componentDidMount() {\n    window.addEventListener(\"scroll\", this.handleScroll);\n    if (window.history.scrollRestoration) {\n      window.history.scrollRestoration = \"manual\";\n    }\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"scroll\", this.handleScroll);\n  }\n\n  handleScroll = () => {\n    const currScroll =\n      document.body.scrollTop || document.documentElement.scrollTop;\n\n    const totalHeight =\n      document.documentElement.scrollHeight -\n      document.documentElement.clientHeight;\n\n    const opacityThreshold = 100;\n\n    if (currScroll > opacityThreshold) {\n      if (this.state.logoOpacity !== 0) this.setState({ logoOpacity: 0 });\n    } else {\n      this.setState({ logoOpacity: 1 - currScroll / opacityThreshold });\n    }\n  };\n\n  handleNodeClick = (node) => {\n    this.props.history.push(`/herb/${node.slug}`);\n  };\n\n  render() {\n    const { logoOpacity } = this.state;\n    return (\n      <FadeInOut className=\"HomePage\">\n        {/*<HerbTree onNodeClick={this.handleNodeClick} />*/}\n        <Link to=\"/intro\" className=\"Help\">\n          <Button>מה זה?</Button>\n        </Link>\n        <h1 className=\"Logo\" style={{ opacity: logoOpacity + 0.15 }}>\n          על טעם וריח\n        </h1>\n      </FadeInOut>\n    );\n  }\n}\n\nexport default withRouter(HomePage);\n","import React, { useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { AnimatePresence } from \"framer-motion\";\n\nimport Button from \"../../components/Button/Button\";\nimport FadeInOut from \"../../components/FadeInOut/FadeInOut\";\n\nimport \"./IntroPage.scss\";\n\nconst IntroPage = (props) => {\n  const [page, setPage] = useState(0);\n\n  return (\n    <FadeInOut className=\"IntroPage\">\n      <AnimatePresence exitBeforeEnter>\n        {renderPage(page, setPage)}\n      </AnimatePresence>\n      <Link to=\"/\" className=\"Skip\">\n        <Button>דלג ></Button>\n      </Link>\n    </FadeInOut>\n  );\n};\n\nconst renderPage = (page, setPage) => {\n  switch (page) {\n    case 0:\n      return (\n        <FadeInOut className=\"page P0\" key=\"P0\">\n          <h1>על טעם וריח</h1>\n          <h2>מדריך לעשבי תיבול במטבח</h2>\n          <Button onClick={() => setPage(1)}>מה הקטע?</Button>\n        </FadeInOut>\n      );\n    case 1:\n      return (\n        <FadeInOut className=\"page P1\" key=\"P1\">\n          <div className=\"ProtoPlant\"></div>\n          <p>כל הצמחים בעולם התפתחו מאב קדמון אחד.</p>\n          <Button onClick={() => setPage(2)}>אוקיי</Button>\n        </FadeInOut>\n      );\n    case 2:\n      return (\n        <FadeInOut\n          className=\"page P2\"\n          key=\"P2\"\n          style={{\n            backgroundImage: \"url('/images/tree-bg-big.jpg')\",\n          }}\n        >\n          <p>לאורך עידנים הצמחים השתנו, התפצלו והתפתחו לאינספור זנים שונים.</p>\n          <Button onClick={() => setPage(3)}>סבבה</Button>\n        </FadeInOut>\n      );\n    case 3:\n      return (\n        <FadeInOut\n          className=\"page P3\"\n          key=\"P3\"\n          style={{\n            backgroundImage: \"url('/images/tree-bg-small.jpg')\",\n          }}\n        >\n          <p>\n            האתר שלפניכם נותן הצצה לעץ החיים הענק הזה, דרך צמחי התבלין.\n            <br />\n            בנוסף תוכלו למצוא הסברים, מתכונים, ושימושים לצמחים השונים.\n          </p>\n          <Link to=\"/\">\n            <Button>יאללה!</Button>\n          </Link>\n        </FadeInOut>\n      );\n    default:\n      return \"\";\n  }\n};\n\nexport default IntroPage;\n","import React from \"react\";\nimport lang from \"../../lang\";\nimport \"./HerbSummary.scss\";\n\nconst HerbSummary = (props) => {\n  const { slug, herb, family } = props;\n  const altNames = herb.altNames[lang];\n\n  return (\n    <div className=\"HerbSummary\">\n      <img className=\"HerbIcon\" src={`/images/icons/${slug}.png`} alt={slug} />\n      <table className=\"InfoTable\">\n        <tbody>\n          <tr>\n            <td colSpan=\"2\" className=\"scientificName\">\n              {herb.name}\n            </td>\n          </tr>\n          <tr>\n            <th>באנגלית</th>\n            <td>{herb.commonName[\"en\"]}</td>\n          </tr>\n          {altNames ? (\n            <tr>\n              <th>שמות נוספים</th>\n              <td>{altNames}</td>\n            </tr>\n          ) : null}\n          <tr>\n            <th>משפחה</th>\n            <td>{family.name[lang]}</td>\n          </tr>\n          <tr>\n            <th>צורת חיים</th>\n            <td>\n              {herb.lifeform[lang]} {herb.lifecycle[lang]}\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  );\n};\n\nexport default HerbSummary;\n","import React from \"react\";\nimport ReactMarkdown from \"react-markdown\";\nimport { withRouter } from \"react-router-dom\";\nimport lang from \"../../lang\";\n\nimport FadeInOut from \"../../components/FadeInOut/FadeInOut\";\nimport HerbSummary from \"../../components/HerbSummary/HerbSummary\";\nimport herbInfo from \"../../data/herbInfo.json\";\nimport familyInfo from \"../../data/familyInfo.json\";\n\nimport \"./HerbPage.scss\";\n\nclass HerbPage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { md: \"loading...\" };\n  }\n\n  async componentDidMount() {\n    const { slug } = this.props.match.params;\n    // const slug = \"bay-leaf\";\n    const response = await fetch(`/herb-pages/${slug}.md`);\n    const text = await response.text();\n\n    this.setState({\n      md: text,\n    });\n  }\n\n  render() {\n    const { slug } = this.props.match.params;\n    // const slug = \"bay-leaf\";\n    const herb = herbInfo.filter((herb) => herb.slug === slug)[0];\n    const familyName = herb.taxonomy.find((rank) =>\n      rank.hasOwnProperty(\"Familia\")\n    ).Familia;\n    const family = familyInfo[familyName.toLowerCase()];\n\n    return (\n      <FadeInOut className=\"HerbPage\">\n        <main>\n          <HerbSummary herb={herb} slug={slug} family={family} />\n          <div className=\"HerbContent\">\n            <div className=\"herbPhoto\">\n              <img\n                src={`/images/photos/${slug}.jpg`}\n                alt={herb.commonName[lang]}\n              />\n            </div>\n            <h1>{herb.commonName[lang]}</h1>\n            <ReactMarkdown>{this.state.md}</ReactMarkdown>\n            <h2>משפחת ה{family.name[lang]}</h2>\n            <p>{family.description[lang]}</p>\n          </div>\n        </main>\n      </FadeInOut>\n    );\n  }\n}\n\nexport default withRouter(HerbPage);\n","import React from \"react\";\nimport taxonomyTree from \"../../data/taxonomyTree.json\";\nimport taxonomyTreeOverrides from \"../../data/taxonomyTreeOverrides.json\";\nimport { graph, updateGraphSize } from \"./graphUtils\";\nimport \"./HerbTree.scss\";\n\nclass HerbTree extends React.Component {\n  constructor(props) {\n    super(props);\n    this.d3ref = React.createRef();\n    this.tooltipRef = React.createRef();\n  }\n\n  componentDidMount() {\n    this.setGraphSize();\n\n    const taxonomyTreePruned = applyNodeOverrides(\n      removeSingleChildren(JSON.parse(JSON.stringify(taxonomyTree)))\n    );\n    this.simulation = graph(\n      this.d3ref,\n      this.tooltipRef,\n      taxonomyTreePruned,\n      this\n    );\n\n    window.scrollTo(0, document.body.scrollHeight);\n    window.addEventListener(\"resize\", (e) => this.handleResize(e));\n  }\n\n  handleResize(e) {\n    this.setGraphSize();\n  }\n\n  handleClick(event, node) {\n    if (node.height === 0) this.props.onNodeClick(node.data);\n  }\n\n  setGraphSize() {\n    const w = document.documentElement.clientWidth;\n    const h = Math.min(document.documentElement.clientHeight, 710);\n    updateGraphSize(w, h);\n  }\n\n  logPositions() {\n    const nodePositions = {};\n    this.simulation.nodes().forEach((node, i) => {\n      nodePositions[node.data.id] = { x: node.x, y: node.y };\n    });\n    console.log(JSON.stringify(nodePositions));\n  }\n\n  render() {\n    const { isMinimal, isHidden } = this.props;\n    let classNames = \"HerbTree\";\n    if (isMinimal) classNames += \" minimal\";\n    if (isHidden) classNames += \" hidden\";\n    if ((isMinimal || isHidden) && this.simulation) this.simulation.stop();\n\n    return (\n      <div className={classNames}>\n        {/*<button onClick={() => this.logPositions()}>Get positions</button>*/}\n        <div className=\"treeContainer\" ref={this.d3ref}>\n          <div className=\"tooltipContainer\" ref={this.tooltipRef}></div>\n        </div>\n      </div>\n    );\n  }\n}\n\nconst applyNodeOverrides = (node) => {\n  if (node.children) node.children.forEach(applyNodeOverrides);\n\n  // applyNodeOverrides\n  if (node.slug in taxonomyTreeOverrides) {\n    const overrideNode = taxonomyTreeOverrides[node.slug];\n    node.name = overrideNode.name;\n    node.rank = overrideNode.rank;\n    node.slug = overrideNode.slug;\n  }\n  return node;\n};\n\nconst removeSingleChildren = (node) => {\n  if (node.children) node.children.forEach(removeSingleChildren);\n  if (\n    node.children &&\n    node.children.length === 1 &&\n    node.rank.en !== \"Cladus\"\n  ) {\n    const { id, children, name, rank, slug } = node.children[0];\n    node.id = id;\n    node.children = children;\n    node.name = name;\n    node.rank = rank;\n    node.slug = slug;\n  }\n  return node;\n};\n\nexport default HerbTree;\n","import React from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport Autosuggest from \"react-autosuggest\";\nimport lang from \"../../lang\";\n\nimport AutosuggestMatch from \"autosuggest-highlight/match\";\nimport AutosuggestParse from \"autosuggest-highlight/parse\";\n\nimport herbInfo from \"../../data/herbInfo.json\";\n\nimport \"./Search.scss\";\n\nconst doesContainPrefix = (str, prefix) => {\n  return str\n    .split(\" \")\n    .reduce(\n      (containsPrefix, word) =>\n        containsPrefix || word.slice(0, prefix.length) === prefix,\n      false\n    );\n};\n\nconst getMatchedName = (herb, query) => {\n  let allNames = herb.altNames[lang].split(\",\");\n  allNames.unshift(herb.commonName[lang]);\n  let enNames = herb.altNames.en.toLowerCase().split(\",\");\n  enNames.unshift(herb.commonName.en.toLowerCase());\n  enNames.push(herb.name.toLowerCase());\n  allNames = allNames.concat(enNames);\n\n  const matchIndex = allNames.findIndex((name) =>\n    doesContainPrefix(name, query)\n  );\n  const matchName = matchIndex > -1 ? allNames[matchIndex] : \"\";\n  return { matchName, matchIndex };\n};\n\nconst getMatchIndex = (herb, query) => {\n  return getMatchedName(herb, query).matchIndex;\n};\n\n// How to calculate suggestions for any given input value.\nconst getSuggestions = (value) => {\n  const inputValue = value.trim().toLowerCase();\n  const inputLength = inputValue.length;\n\n  if (inputLength <= 1) return [];\n\n  // Sort results by index of match\n  const matchedHerbs = herbInfo\n    .map((herb, i) => ({\n      herb,\n      matchIndex: getMatchIndex(herb, inputValue),\n    }))\n    .filter((herb) => herb.matchIndex > -1)\n    .sort((h1, h2) => h1.matchIndex - h2.matchIndex);\n\n  return matchedHerbs.map((herb) => herb.herb);\n};\n\n// When suggestion is clicked, Autosuggest needs to populate the input\n// based on the clicked suggestion. Teach Autosuggest how to calculate the\n// input value for every given suggestion.\nconst getSuggestionValue = (suggestion) => suggestion.commonName[lang];\n\n// Use your imagination to render suggestions.\nconst renderSuggestion = (suggestion, { query }) => {\n  query = query.toLowerCase();\n  const commonName = suggestion.commonName[lang];\n  const suggestionText = getMatchedName(suggestion, query).matchName;\n\n  const matches = AutosuggestMatch(suggestionText, query);\n  const parts = AutosuggestParse(suggestionText, matches);\n\n  return (\n    <div>\n      <span className=\"name\">\n        {parts.map((part, index) => {\n          const className = part.highlight ? \"highlight\" : \"\";\n\n          return (\n            <span className={className} key={index}>\n              {part.text}\n            </span>\n          );\n        })}\n        {suggestionText !== commonName && ` (${commonName})`}\n      </span>\n    </div>\n  );\n};\n\nclass Search extends React.Component {\n  constructor() {\n    super();\n\n    this.state = {\n      value: \"\",\n      suggestions: [],\n      highlightedSuggestion: \"\",\n    };\n  }\n\n  isSuggestionHighlighted = () => {\n    const { suggestions, highlightedSuggestion } = this.state;\n    return suggestions.some((s) => s === highlightedSuggestion);\n  };\n\n  onChange = (event, { newValue }) => {\n    this.setState({\n      value: newValue,\n    });\n  };\n\n  // Autosuggest will call this function every time you need to update suggestions.\n  onSuggestionsFetchRequested = ({ value }) => {\n    this.setState({\n      suggestions: getSuggestions(value),\n    });\n  };\n\n  // Autosuggest will call this function every time you need to clear suggestions.\n  onSuggestionsClearRequested = () => {\n    this.setState({\n      suggestions: [],\n      highlightedSuggestion: \"\",\n    });\n  };\n\n  onSuggestionSelected = (e, { suggestion }) => {\n    this.goToResult(suggestion);\n  };\n\n  onSuggestionHighlighted = ({ suggestion }) => {\n    this.setState({ highlightedSuggestion: suggestion });\n  };\n\n  goToResult = (suggestion) => {\n    this.setState({\n      value: \"\",\n      suggestions: [],\n      highlightedSuggestion: \"\",\n    });\n    this.props.history.push(`/herb/${suggestion.slug}`);\n  };\n\n  onKeyDown = (e) => {\n    if (e.key === \"Enter\") {\n      const { suggestions } = this.state;\n      if (!this.isSuggestionHighlighted() && suggestions.length > 0) {\n        this.goToResult(suggestions[0]);\n      }\n    }\n  };\n\n  render() {\n    const { value, suggestions } = this.state;\n\n    // Autosuggest will pass through all these props to the input.\n    const inputProps = {\n      placeholder: \"חיפוש\",\n      value,\n      onChange: this.onChange,\n      onKeyDown: this.onKeyDown,\n    };\n\n    return (\n      <div className=\"Search\">\n        <img src=\"/images/ui/search.svg\" alt=\"Search\" className=\"searchIcon\" />\n        <Autosuggest\n          suggestions={suggestions}\n          onSuggestionsFetchRequested={this.onSuggestionsFetchRequested}\n          onSuggestionsClearRequested={this.onSuggestionsClearRequested}\n          onSuggestionSelected={this.onSuggestionSelected}\n          onSuggestionHighlighted={this.onSuggestionHighlighted}\n          getSuggestionValue={getSuggestionValue}\n          renderSuggestion={renderSuggestion}\n          inputProps={inputProps}\n        />\n      </div>\n    );\n  }\n}\n\nexport default withRouter(Search);\n","import React from \"react\";\nimport { AnimatePresence } from \"framer-motion\";\nimport { Route, Switch, useLocation, useHistory } from \"react-router-dom\";\nimport HomePage from \"./pages/HomePage/HomePage\";\nimport IntroPage from \"./pages/IntroPage/IntroPage\";\nimport HerbPage from \"./pages/HerbPage/HerbPage\";\nimport HerbTree from \"./components/HerbTree/HerbTree\";\nimport Search from \"./components/Search/Search\";\n\nconst App = () => {\n  const history = useHistory();\n  const location = useLocation();\n\n  const handleNodeClick = (node) => {\n    history.push(`/herb/${node.slug}`);\n  };\n\n  return (\n    <div>\n      <Search />\n      <HerbTree\n        isMinimal={location.pathname !== \"/\"}\n        isHidden={location.pathname === \"/intro\"}\n        onNodeClick={handleNodeClick}\n      />\n      <AnimatePresence exitBeforeEnter>\n        <Switch location={location} key={location.pathname}>\n          <Route exact path=\"/\">\n            <HomePage />\n          </Route>{\" \"}\n          <Route exact path=\"/intro\">\n            <IntroPage />\n          </Route>\n          <Route path=\"/herb/:slug\">\n            <HerbPage />\n          </Route>\n        </Switch>\n      </AnimatePresence>\n    </div>\n  );\n};\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.scss\";\nimport App from \"./App\";\nimport { BrowserRouter as Router } from \"react-router-dom\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nReactDOM.render(\n  // <React.StrictMode>\n  <Router>\n    <App />\n  </Router>,\n  // </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","var defined = require(\"defined\");\nvar EPSILON = Number.EPSILON;\n\nfunction clamp(value, min, max) {\n  return min < max\n    ? value < min\n      ? min\n      : value > max\n      ? max\n      : value\n    : value < max\n    ? max\n    : value > min\n    ? min\n    : value;\n}\n\nfunction clamp01(v) {\n  return clamp(v, 0, 1);\n}\n\nfunction lerp(min, max, t) {\n  return min * (1 - t) + max * t;\n}\n\nfunction inverseLerp(min, max, t) {\n  if (Math.abs(min - max) < EPSILON) return 0;\n  else return (t - min) / (max - min);\n}\n\nfunction smoothstep(min, max, t) {\n  var x = clamp(inverseLerp(min, max, t), 0, 1);\n  return x * x * (3 - 2 * x);\n}\n\nfunction toFinite(n, defaultValue) {\n  defaultValue = defined(defaultValue, 0);\n  return typeof n === \"number\" && isFinite(n) ? n : defaultValue;\n}\n\nfunction expandVector(dims) {\n  if (typeof dims !== \"number\") throw new TypeError(\"Expected dims argument\");\n  return function (p, defaultValue) {\n    defaultValue = defined(defaultValue, 0);\n    var scalar;\n    if (p == null) {\n      // No vector, create a default one\n      scalar = defaultValue;\n    } else if (typeof p === \"number\" && isFinite(p)) {\n      // Expand single channel to multiple vector\n      scalar = p;\n    }\n\n    var out = [];\n    var i;\n    if (scalar == null) {\n      for (i = 0; i < dims; i++) {\n        out[i] = toFinite(p[i], defaultValue);\n      }\n    } else {\n      for (i = 0; i < dims; i++) {\n        out[i] = scalar;\n      }\n    }\n    return out;\n  };\n}\n\nfunction lerpArray(min, max, t, out) {\n  out = out || [];\n  if (min.length !== max.length) {\n    throw new TypeError(\n      \"min and max array are expected to have the same length\"\n    );\n  }\n  for (var i = 0; i < min.length; i++) {\n    out[i] = lerp(min[i], max[i], t);\n  }\n  return out;\n}\n\nfunction newArray(n, initialValue) {\n  n = defined(n, 0);\n  if (typeof n !== \"number\")\n    throw new TypeError(\"Expected n argument to be a number\");\n  var out = [];\n  for (var i = 0; i < n; i++) out.push(initialValue);\n  return out;\n}\n\nfunction linspace(n, opts) {\n  n = defined(n, 0);\n  if (typeof n !== \"number\")\n    throw new TypeError(\"Expected n argument to be a number\");\n  opts = opts || {};\n  if (typeof opts === \"boolean\") {\n    opts = { endpoint: true };\n  }\n  var offset = defined(opts.offset, 0);\n  if (opts.endpoint) {\n    return newArray(n).map(function (_, i) {\n      return n <= 1 ? 0 : (i + offset) / (n - 1);\n    });\n  } else {\n    return newArray(n).map(function (_, i) {\n      return (i + offset) / n;\n    });\n  }\n}\n\nfunction lerpFrames(values, t, out) {\n  t = clamp(t, 0, 1);\n\n  var len = values.length - 1;\n  var whole = t * len;\n  var frame = Math.floor(whole);\n  var fract = whole - frame;\n\n  var nextFrame = Math.min(frame + 1, len);\n  var a = values[frame % values.length];\n  var b = values[nextFrame % values.length];\n  if (typeof a === \"number\" && typeof b === \"number\") {\n    return lerp(a, b, fract);\n  } else if (Array.isArray(a) && Array.isArray(b)) {\n    return lerpArray(a, b, fract, out);\n  } else {\n    throw new TypeError(\n      \"Mismatch in value type of two array elements: \" +\n        frame +\n        \" and \" +\n        nextFrame\n    );\n  }\n}\n\nfunction mod(a, b) {\n  return ((a % b) + b) % b;\n}\n\nfunction degToRad(n) {\n  return (n * Math.PI) / 180;\n}\n\nfunction radToDeg(n) {\n  return (n * 180) / Math.PI;\n}\n\nfunction fract(n) {\n  return n - Math.floor(n);\n}\n\nfunction sign(n) {\n  if (n > 0) return 1;\n  else if (n < 0) return -1;\n  else return 0;\n}\n\nfunction pingPong(t, length) {\n  t = mod(t, length * 2);\n  return length - Math.abs(t - length);\n}\n\nfunction damp(a, b, lambda, dt) {\n  return lerp(a, b, 1 - Math.exp(-lambda * dt));\n}\n\nfunction dampArray(a, b, lambda, dt, out) {\n  out = out || [];\n  for (var i = 0; i < a.length; i++) {\n    out[i] = damp(a[i], b[i], lambda, dt);\n  }\n  return out;\n}\n\nfunction normalize2D(x, y) {\n  const len = len2D(x, y);\n  return { x: x / len, y: y / len };\n}\n\nfunction len2D(x, y) {\n  return Math.sqrt(x * x + y * y);\n}\n\nfunction mapRange(value, inputMin, inputMax, outputMin, outputMax, clamp) {\n  // Reference:\n  // https://openframeworks.cc/documentation/math/ofMath/\n  if (Math.abs(inputMin - inputMax) < EPSILON) {\n    return outputMin;\n  } else {\n    var outVal =\n      ((value - inputMin) / (inputMax - inputMin)) * (outputMax - outputMin) +\n      outputMin;\n    if (clamp) {\n      if (outputMax < outputMin) {\n        if (outVal < outputMax) outVal = outputMax;\n        else if (outVal > outputMin) outVal = outputMin;\n      } else {\n        if (outVal > outputMax) outVal = outputMax;\n        else if (outVal < outputMin) outVal = outputMin;\n      }\n    }\n    return outVal;\n  }\n}\n\nfunction dist2D(v1, v2) {\n  return len2D(v1.x - v2.x, v1.y - v2.y);\n}\n\nmodule.exports = {\n  mod: mod,\n  fract: fract,\n  sign: sign,\n  degToRad: degToRad,\n  radToDeg: radToDeg,\n  pingPong: pingPong,\n  linspace: linspace,\n  lerp: lerp,\n  lerpArray: lerpArray,\n  inverseLerp: inverseLerp,\n  lerpFrames: lerpFrames,\n  clamp: clamp,\n  clamp01: clamp01,\n  smoothstep: smoothstep,\n  damp: damp,\n  dampArray: dampArray,\n  mapRange: mapRange,\n  expand2D: expandVector(2),\n  expand3D: expandVector(3),\n  expand4D: expandVector(4),\n  normalize2D: normalize2D,\n  len2D: len2D,\n  dist2D: dist2D,\n};\n"],"sourceRoot":""}