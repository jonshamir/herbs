{"version":3,"sources":["utils/math.js","components/IntroGraph/introGraphUtils.js","components/HerbTree/graphUtils.js","components/FadeInOut/FadeInOut.js","pages/HomePage/HomePage.js","components/Button/Button.js","lang.js","App.js","components/IntroGraph/IntroGraph.js","pages/IntroPage/IntroPage.js","components/OutLink/OutLink.js","pages/AboutPage/AboutPage.js","components/Image/Image.js","components/RecipePreview/RecipePreview.js","pages/AllRecipesPage/AllRecipesPage.js","components/HerbLink/HerbLink.js","components/ZaatarBlends/ZaatarBlends.js","pages/RecipePage/RecipePage.js","components/HerbSummary/HerbSummary.js","pages/HerbPage/HerbPage.js","components/HerbTree/HerbTree.js","components/Search/Search.js","components/IconButton/IconButton.js","components/Menu/Menu.js","reportWebVitals.js","index.js"],"names":["defined","require","EPSILON","Number","clamp","value","min","max","lerp","t","inverseLerp","Math","abs","toFinite","n","defaultValue","isFinite","expandVector","dims","TypeError","p","scalar","i","out","lerpArray","length","newArray","initialValue","push","mod","a","b","damp","lambda","dt","exp","len2D","x","y","sqrt","module","exports","fract","floor","sign","degToRad","PI","radToDeg","pingPong","linspace","opts","endpoint","offset","map","_","lerpFrames","values","len","whole","frame","nextFrame","Array","isArray","clamp01","v","smoothstep","dampArray","mapRange","inputMin","inputMax","outputMin","outputMax","outVal","expand2D","expand3D","expand4D","normalize2D","dist2D","v1","v2","svg","link","node","protoPlant","simulation","rootNode","svgEl","containerEl","text","tooltip","tooltipContainer","hoverTimer","FadeInOut","_ref","children","enterDelay","rest","_objectWithoutProperties","_excluded","_jsx","motion","div","_objectSpread","initial","opacity","animate","transition","delay","exit","duration","HomePage","_React$Component","_inherits","_super","_createSuper","_classCallCheck","apply","arguments","_createClass","key","this","props","shouldShowIntro","Redirect","to","className","React","Component","Button","width","height","setupSimulation","nodes","links","d3","alphaDecay","alphaMin","force","id","d","distance","strength","forceManyBodyReuse","radius","alpha","multiplier","pow","forEach","parent","drawTree","ref","current","append","attr","lower","selectAll","data","join","target","concat","slug","classed","filter","depth","call","drag","linkLength","source","on","event","active","alphaTarget","restart","fx","fy","lang","TABLET_WIDTH","imageSize","allowDrag","mousePos","fixed","dist","invDist","deltaX","deltaY","dir","getNodeLabel","name","herbInfo","commonName","rank","familyInfo","collisionRadius","handleMouseMove","setupTooltip","tooltipRef","style","setupInteractions","parentComponent","onSubtreeActivate","e","setTimeout","_d$data","undefined","currNode","raise","setSubtreeActive","isActive","nodeInfo","html","description","handleHover","clearTimeout","handleClick","setupDrag","console","log","growTree","growthTime","growImages","ease","end","then","random","scrollContainerToBottom","scrollingContainer","parentElement","maxScroll","scrollWidth","offsetWidth","scrollTo","scrollHeight","root","highlightDuration","positionHerbDuration","positionHighlightedHerb","herbNode","document","getElementsByClassName","scrollTop","herbRotation","transform","baseVal","angle","matrix","f","moveX","scrollRight","scrollLeft","sin","cos","unhighlightAll","scaleImages","_step2","_iterator2","_createForOfIteratorHelper","s","done","el","err","offsetY","timeout","IntroGraph","_this","d3ref","createRef","tree","randomTree","_this2","setGraphSize","cx","cy","r","descendants","initialNodePositions","_initialNodePositions","initTree","window","addEventListener","handleResize","w","h","updateGraphSize","documentElement","clientWidth","clientHeight","prevProps","page","updateGraph","GraphUtils","nodePositions","JSON","stringify","renderPage","setPage","_jsxs","onClick","Link","IntroPage","_useState","useState","_useState2","_slicedToArray","useEffect","onMount","AnimatePresence","exitBeforeEnter","OutLink","href","rel","AboutPage","src","alt","Image","_ref$className","ratio","_ref$minTimeToLoad","minTimeToLoad","hasImageLoaded","setHasImageLoaded","_useState3","_useState4","isTimerComplete","setIsTimerComplete","onLoad","RecipePreview","recipe","title","herbs","time","difficulty","herb","AllRecipesPage","recipeInfo","HerbLink","inline","herbUrl","blendInfo","ingredients","ZaatarBlends","blend","RecipePage","state","md","imageLoaded","timerComplete","_componentDidMount","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","wrap","_context","prev","next","match","params","fetch","sent","setState","stop","hrefParts","split","_ref2","metadata","trim","altText","_this3","_this$state","author","ReactMarkdown","components","renderLink","img","renderImage","withRouter","HerbSummary","family","altNames","colSpan","lifeform","lifecycle","HerbPage","recipes","includes","_Fragment","history","familyName","taxonomy","find","hasOwnProperty","Familia","toLowerCase","onTitleClick","renderRecipes","HerbTree","handleSubtreeActivate","hasChildren","isSubtreeActive","containerRef","logoOpacity","isHidden","isMinimal","isInteractive","initalLoaded","positionHighlightedHerbDebounced","debounce","taxonomyTreePruned","applyNodeOverrides","removeSingleChildren","parse","taxonomyTree","shouldAllowDrag","atan2","xPos","yPos","label","debug","scrollToBottomCenter","onRouteChanged","handleScroll","_this$containerRef$cu","left","top","behavior","removeEventListener","currScroll","location","pathname","onNodeClick","lineColor","bgColor","body","backgroundImage","backgroundColor","imageCenterTransform","remove","printLayout","prevLocation","route","routeParts","slice","pop","_step","_iterator","select","highlightHerb","_this4","_this$state2","classNames","getLogoOpacity","logPositions","getPrintLayout","taxonomyTreeOverrides","overrideNode","en","_node$children$","getMatchedName","query","allNames","unshift","enNames","matchIndex","findIndex","prefix","reduce","containsPrefix","word","matchName","getMatchIndex","getSuggestions","inputValue","sort","h1","h2","getSuggestionValue","suggestion","renderSuggestion","suggestionText","matches","AutosuggestMatch","parts","AutosuggestParse","part","index","highlight","Search","isSuggestionHighlighted","suggestions","highlightedSuggestion","some","onChange","newValue","onSuggestionsFetchRequested","_ref3","onSuggestionsClearRequested","onSuggestionSelected","_ref4","goToResult","onSuggestionHighlighted","_ref5","onKeyDown","inputProps","placeholder","Autosuggest","IconButton","icon","onmousemove","App","useHistory","useLocation","scrollRestoration","setShouldShowIntro","Menu","Switch","Route","exact","path","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","Router","basename","getElementById"],"mappings":"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","file":"static/js/main.3ad2b20b.chunk.js","sourcesContent":["var defined = require(\"defined\");\nvar EPSILON = Number.EPSILON;\n\nfunction clamp(value, min, max) {\n  return min < max\n    ? value < min\n      ? min\n      : value > max\n      ? max\n      : value\n    : value < max\n    ? max\n    : value > min\n    ? min\n    : value;\n}\n\nfunction clamp01(v) {\n  return clamp(v, 0, 1);\n}\n\nfunction lerp(min, max, t) {\n  return min * (1 - t) + max * t;\n}\n\nfunction inverseLerp(min, max, t) {\n  if (Math.abs(min - max) < EPSILON) return 0;\n  else return (t - min) / (max - min);\n}\n\nfunction smoothstep(min, max, t) {\n  var x = clamp(inverseLerp(min, max, t), 0, 1);\n  return x * x * (3 - 2 * x);\n}\n\nfunction toFinite(n, defaultValue) {\n  defaultValue = defined(defaultValue, 0);\n  return typeof n === \"number\" && isFinite(n) ? n : defaultValue;\n}\n\nfunction expandVector(dims) {\n  if (typeof dims !== \"number\") throw new TypeError(\"Expected dims argument\");\n  return function (p, defaultValue) {\n    defaultValue = defined(defaultValue, 0);\n    var scalar;\n    if (p == null) {\n      // No vector, create a default one\n      scalar = defaultValue;\n    } else if (typeof p === \"number\" && isFinite(p)) {\n      // Expand single channel to multiple vector\n      scalar = p;\n    }\n\n    var out = [];\n    var i;\n    if (scalar == null) {\n      for (i = 0; i < dims; i++) {\n        out[i] = toFinite(p[i], defaultValue);\n      }\n    } else {\n      for (i = 0; i < dims; i++) {\n        out[i] = scalar;\n      }\n    }\n    return out;\n  };\n}\n\nfunction lerpArray(min, max, t, out) {\n  out = out || [];\n  if (min.length !== max.length) {\n    throw new TypeError(\n      \"min and max array are expected to have the same length\"\n    );\n  }\n  for (var i = 0; i < min.length; i++) {\n    out[i] = lerp(min[i], max[i], t);\n  }\n  return out;\n}\n\nfunction newArray(n, initialValue) {\n  n = defined(n, 0);\n  if (typeof n !== \"number\")\n    throw new TypeError(\"Expected n argument to be a number\");\n  var out = [];\n  for (var i = 0; i < n; i++) out.push(initialValue);\n  return out;\n}\n\nfunction linspace(n, opts) {\n  n = defined(n, 0);\n  if (typeof n !== \"number\")\n    throw new TypeError(\"Expected n argument to be a number\");\n  opts = opts || {};\n  if (typeof opts === \"boolean\") {\n    opts = { endpoint: true };\n  }\n  var offset = defined(opts.offset, 0);\n  if (opts.endpoint) {\n    return newArray(n).map(function (_, i) {\n      return n <= 1 ? 0 : (i + offset) / (n - 1);\n    });\n  } else {\n    return newArray(n).map(function (_, i) {\n      return (i + offset) / n;\n    });\n  }\n}\n\nfunction lerpFrames(values, t, out) {\n  t = clamp(t, 0, 1);\n\n  var len = values.length - 1;\n  var whole = t * len;\n  var frame = Math.floor(whole);\n  var fract = whole - frame;\n\n  var nextFrame = Math.min(frame + 1, len);\n  var a = values[frame % values.length];\n  var b = values[nextFrame % values.length];\n  if (typeof a === \"number\" && typeof b === \"number\") {\n    return lerp(a, b, fract);\n  } else if (Array.isArray(a) && Array.isArray(b)) {\n    return lerpArray(a, b, fract, out);\n  } else {\n    throw new TypeError(\n      \"Mismatch in value type of two array elements: \" +\n        frame +\n        \" and \" +\n        nextFrame\n    );\n  }\n}\n\nfunction mod(a, b) {\n  return ((a % b) + b) % b;\n}\n\nfunction degToRad(n) {\n  return (n * Math.PI) / 180;\n}\n\nfunction radToDeg(n) {\n  return (n * 180) / Math.PI;\n}\n\nfunction fract(n) {\n  return n - Math.floor(n);\n}\n\nfunction sign(n) {\n  if (n > 0) return 1;\n  else if (n < 0) return -1;\n  else return 0;\n}\n\nfunction pingPong(t, length) {\n  t = mod(t, length * 2);\n  return length - Math.abs(t - length);\n}\n\nfunction damp(a, b, lambda, dt) {\n  return lerp(a, b, 1 - Math.exp(-lambda * dt));\n}\n\nfunction dampArray(a, b, lambda, dt, out) {\n  out = out || [];\n  for (var i = 0; i < a.length; i++) {\n    out[i] = damp(a[i], b[i], lambda, dt);\n  }\n  return out;\n}\n\nfunction normalize2D(x, y) {\n  const len = len2D(x, y);\n  return { x: x / len, y: y / len };\n}\n\nfunction len2D(x, y) {\n  return Math.sqrt(x * x + y * y);\n}\n\nfunction mapRange(value, inputMin, inputMax, outputMin, outputMax, clamp) {\n  // Reference:\n  // https://openframeworks.cc/documentation/math/ofMath/\n  if (Math.abs(inputMin - inputMax) < EPSILON) {\n    return outputMin;\n  } else {\n    var outVal =\n      ((value - inputMin) / (inputMax - inputMin)) * (outputMax - outputMin) +\n      outputMin;\n    if (clamp) {\n      if (outputMax < outputMin) {\n        if (outVal < outputMax) outVal = outputMax;\n        else if (outVal > outputMin) outVal = outputMin;\n      } else {\n        if (outVal > outputMax) outVal = outputMax;\n        else if (outVal < outputMin) outVal = outputMin;\n      }\n    }\n    return outVal;\n  }\n}\n\nfunction dist2D(v1, v2) {\n  return len2D(v1.x - v2.x, v1.y - v2.y);\n}\n\nmodule.exports = {\n  mod: mod,\n  fract: fract,\n  sign: sign,\n  degToRad: degToRad,\n  radToDeg: radToDeg,\n  pingPong: pingPong,\n  linspace: linspace,\n  lerp: lerp,\n  lerpArray: lerpArray,\n  inverseLerp: inverseLerp,\n  lerpFrames: lerpFrames,\n  clamp: clamp,\n  clamp01: clamp01,\n  smoothstep: smoothstep,\n  damp: damp,\n  dampArray: dampArray,\n  mapRange: mapRange,\n  expand2D: expandVector(2),\n  expand3D: expandVector(3),\n  expand4D: expandVector(4),\n  normalize2D: normalize2D,\n  len2D: len2D,\n  dist2D: dist2D,\n};\n","import * as d3 from \"d3\";\nimport { forceManyBodyReuse } from \"d3-force-reuse\";\nimport { dist2D } from \"../../utils/math\";\n\nimport initialNodePositions from \"../../data/initialNodePositionsRandom.json\";\n\nlet width = 400;\nlet height = 400;\nconst collisionRadius = 16;\nconst marginY = 50;\nlet centerOffsetX = 0;\nlet centerOffsetY = -250;\n\n// Global variables\nlet svg, link, node;\nlet protoPlant;\nlet simulation;\nlet rootNode;\nlet svgEl;\nlet containerEl;\n\nconst HIDE_TREE = true;\n\nconst getCirclePath = (cx, cy, r) =>\n  `M ${cx - r}, ${cy}\n   a ${r},${r} 0 1,0 ${r * 2},0\n   a ${r},${r} 0 1,0 -${r * 2},0`;\n\nexport const initTree = (ref, data, parentComponent) => {\n  rootNode = d3.hierarchy(data);\n  const links = rootNode.links();\n  const nodes = rootNode.descendants();\n  nodes.forEach((node, i) => {\n    const { id } = node.data;\n    if (id !== 1000 && initialNodePositions[id]) {\n      const { x, y } = initialNodePositions[id];\n      node.x = x;\n      node.y = y;\n    }\n  });\n\n  rootNode.fixed = true;\n  rootNode.fx = 0;\n  rootNode.fy = 0.5 * height - 1 * marginY;\n\n  setupSimulation(nodes, links);\n  drawTree(ref, simulation, nodes, links);\n\n  protoPlant = svg.append(\"g\").classed(\"protoPlant\", true).attr(\"opacity\", 0);\n  for (let i = 1; i <= 4; i++) {\n    protoPlant\n      .append(\"path\")\n      .attr(\"d\", getCirclePath(0, 0, 16))\n      .attr(\"id\", `Circle${i}`);\n  }\n\n  svgEl = svg.node();\n\n  simulation.on(\"tick\", (e) => {\n    node.attr(\"transform\", (d) => `translate(${d.x},${d.y})`);\n\n    link\n      .attr(\"x1\", (d) => d.source.x)\n      .attr(\"y1\", (d) => d.source.y)\n      .attr(\"x2\", (d) => d.target.x)\n      .attr(\"y2\", (d) => d.target.y);\n  });\n\n  return simulation;\n};\n\nexport const setupSimulation = (nodes, links) => {\n  simulation = d3\n    .forceSimulation(nodes)\n    .alphaDecay(0.05)\n    .alphaMin(0.01)\n    .force(\n      \"link\",\n      d3\n        .forceLink(links)\n        .id((d) => d.id)\n        .distance(30)\n        .strength(0.5)\n    )\n    .force(\"charge\", forceManyBodyReuse().strength(-50))\n    .force(\n      \"collision\",\n      d3.forceCollide().radius((d) => (d.children ? 2 : collisionRadius))\n    )\n    .force(\"x\", d3.forceX(centerOffsetX))\n    .force(\"y\", d3.forceY(centerOffsetY))\n    .force(\"growth\", (alpha) => {\n      const multiplier = Math.pow(alpha, 1);\n\n      nodes.forEach((node) => {\n        if (node.parent && node.y > node.parent.y - 1000) {\n          node.y -= multiplier * 6;\n        }\n      });\n    });\n};\n\nexport const showProtoPlant = () => {\n  protoPlant\n    .attr(\"transform\", \"translate(0,-50) scale(0.5)\")\n    .transition()\n    .ease(d3.easeCubicOut)\n    .duration(1000)\n    .delay(300)\n    .attr(\"opacity\", 1)\n    .attr(\"transform\", \"translate(0,-50) scale(1)\");\n};\n\nexport const moveProtoPlant = () => {\n  return protoPlant\n    .transition()\n    .ease(d3.easeCubicIn)\n    .duration(1000)\n    .delay(300)\n    .attr(\"transform\", `translate(0,${rootNode.fy}) scale(0.12)`)\n    .end();\n};\n\nexport const drawTree = (ref, simulation, nodes, links) => {\n  containerEl = ref.current;\n\n  svg = d3\n    .select(containerEl)\n    .append(\"svg\")\n    .attr(\"viewBox\", [-width / 2, -height / 2, width, height])\n    .lower();\n\n  link = svg\n    .append(\"g\")\n    .selectAll(\"line\")\n    .data(links)\n    .join(\"line\")\n    .attr(\"class\", \"link\")\n    .attr(\"stroke\", \"#ccc\")\n    .attr(\"stroke-width\", (d) => Math.min(d.target.height + 1, 4))\n    .attr(\"opacity\", HIDE_TREE ? 0 : 1);\n\n  node = svg\n    .append(\"g\")\n    .selectAll(\"g\")\n    .data(nodes)\n    .join(\"g\")\n    .attr(\"class\", (d) => `node node-${d.data.slug}`)\n    .classed(\"internode\", (d) => d.children)\n    .attr(\"id\", (d) => d.data.id);\n\n  // Internodes\n  node\n    .append(\"circle\")\n    .attr(\"r\", 2.8)\n    .attr(\"fill\", \"#ccc\")\n    .attr(\"stroke\", \"#f9f5f4\")\n    .attr(\"stroke-width\", \"1.5\")\n    .attr(\"transform\", HIDE_TREE ? \"scale(0.01)\" : \"\");\n\n  node.filter((d) => d.depth > 0).call(drag(simulation));\n};\n\nexport const fadeOut = () => {\n  svg.selectAll(\"g:not(.protoPlant)\").attr(\"opacity\", 1);\n\n  return svg\n    .selectAll(\"g\")\n    .transition()\n    .duration(1000)\n    .attr(\"opacity\", 0)\n    .end();\n};\n\nexport const growTree = (growthTime = 500) => {\n  svg\n    .attr(\"opacity\", 1)\n    .transition()\n    .duration(growthTime * 8)\n    .ease(d3.easeCubicOut)\n    .attr(\"opacity\", 0.5);\n\n  protoPlant\n    .transition()\n    .duration(growthTime * 3)\n    .attr(\"opacity\", 1);\n\n  link\n    .attr(\"opacity\", 1)\n    .attr(\"stroke-dasharray\", (d) => linkLength(d) + \" \" + linkLength(d))\n    .attr(\"stroke-dashoffset\", (d) => linkLength(d))\n    .transition()\n    .delay((d) => d.source.depth * growthTime - 100)\n    .duration((d) => growthTime)\n    .ease(d3.easeLinear)\n    .attr(\"stroke-dashoffset\", 0)\n    .end()\n    .then(function (e) {\n      link.attr(\"stroke-dasharray\", \"none\");\n    });\n\n  svg\n    .selectAll(\"circle\")\n    .transition()\n    .delay((d) => d.depth * growthTime - 100)\n    .duration(growthTime)\n    .attr(\"transform\", \"\")\n    .end();\n};\n\nconst linkLength = (link) => {\n  return dist2D(link.source, link.target) + 3;\n};\n\nexport const updateGraphSize = (w, h) => {\n  width = w / 2;\n  height = h / 2;\n  d3.select(svgEl).attr(\"viewBox\", [-width / 2, -height / 2, width, height]);\n  if (simulation) {\n    simulation.alpha(0.2).restart();\n\n    rootNode.fx = 0;\n    rootNode.fy = 0.5 * height - 1 * marginY;\n  }\n};\n\nconst drag = (simulation) => {\n  function dragstarted(event, d) {\n    if (!event.active) simulation.alphaTarget(0.4).restart();\n    d.fx = d.x;\n    d.fy = d.y;\n  }\n  function dragged(event, d) {\n    d.fx = event.x;\n    d.fy = event.y;\n  }\n  function dragended(event, d) {\n    if (!event.active) simulation.alphaTarget(0);\n    d.fx = null;\n    d.fy = null;\n  }\n  return d3\n    .drag()\n    .on(\"start\", dragstarted)\n    .on(\"drag\", dragged)\n    .on(\"end\", dragended);\n};\n","import * as d3 from \"d3\";\nimport { forceManyBodyReuse } from \"d3-force-reuse\";\nimport {\n  radToDeg,\n  degToRad,\n  normalize2D,\n  dist2D,\n  clamp01,\n} from \"../../utils/math\";\n\nimport herbInfo from \"../../data/herbInfo.json\";\nimport familyInfo from \"../../data/familyInfo.json\";\nimport initialNodePositions from \"../../data/initialNodePositions.json\";\n\nimport lang from \"../../lang\";\n\nconst TABLET_WIDTH = 1000;\n\nlet width = 400;\nlet height = 400;\n// const marginX = 15;\nconst marginY = 50;\nconst centerOffsetX = 0;\nconst centerOffsetY = -20;\nconst imageSize = 40;\nconst collisionRadius = 16;\nlet allowDrag = false;\n\n// Global variables\nlet svg, link, node, text;\nlet tooltip, tooltipContainer;\nlet simulation;\nlet rootNode;\nlet svgEl;\nlet containerEl;\nlet mousePos = { x: -1, y: -1 };\n\nexport const initTree = (\n  ref,\n  tooltipRef,\n  data,\n  parentComponent,\n  onSubtreeActivate,\n  shouldAllowDrag\n) => {\n  allowDrag = shouldAllowDrag;\n  rootNode = d3.hierarchy(data);\n  const links = rootNode.links();\n  const nodes = rootNode.descendants();\n  nodes.forEach((node, i) => {\n    const { id } = node.data;\n    if (id !== 1000 && initialNodePositions[id]) {\n      const { x, y } = initialNodePositions[id];\n      node.x = x;\n      node.y = y;\n    }\n  });\n\n  rootNode.fixed = true;\n  rootNode.fx = centerOffsetX;\n  rootNode.fy = 0.5 * height - 1 * marginY;\n\n  setupSimulation(nodes, links);\n  drawTree(ref, simulation, nodes, links);\n  setupTooltip(tooltipRef);\n  setupInteractions(parentComponent, onSubtreeActivate);\n\n  svgEl = svg.node();\n\n  simulation.on(\"tick\", (e) => {\n    node.attr(\"transform\", (d) => {\n      let transform = `translate(${d.x},${d.y})`;\n      if (!d.children) {\n        const deltaX = d.x - d.parent.x;\n        const deltaY = d.y - d.parent.y;\n        const angle = radToDeg(Math.atan2(deltaY, deltaX)) + 90;\n        transform += ` rotate(${angle})`;\n      }\n      return transform;\n    });\n\n    text.attr(\"transform\", (d) => {\n      let xPos = d.x;\n      let yPos = d.y;\n      if (!d.children) {\n        // Leaf nodes\n        const label = getNodeLabel(d);\n        const deltaX = d.x - d.parent.x;\n        const deltaY = d.y - d.parent.y;\n        const dir = normalize2D(deltaX, deltaY);\n        xPos += dir.x * (imageSize * 0.5 + label.length * 1.5);\n        yPos += dir.y * imageSize * 0.5;\n      }\n\n      return `translate(${xPos},${yPos})`;\n    });\n\n    link\n      .attr(\"x1\", (d) => d.source.x)\n      .attr(\"y1\", (d) => d.source.y)\n      .attr(\"x2\", (d) => d.target.x)\n      .attr(\"y2\", (d) => d.target.y);\n  });\n\n  return simulation;\n};\n\nexport const setupSimulation = (nodes, links) => {\n  simulation = d3\n    .forceSimulation(nodes)\n    .alphaDecay(0.05)\n    .alphaMin(0.01)\n    .force(\n      \"link\",\n      d3\n        .forceLink(links)\n        .id((d) => d.id)\n        .distance(40)\n        .strength(0.5)\n    )\n    .force(\"charge\", forceManyBodyReuse().strength(-80))\n    .force(\n      \"collision\",\n      d3.forceCollide().radius((d) => (d.children ? 2 : collisionRadius))\n    )\n    .force(\"x\", d3.forceX(centerOffsetX))\n    .force(\"y\", d3.forceY(centerOffsetY))\n    .force(\"mouse\", (alpha) => {\n      nodes.forEach((d) => {\n        if (mousePos.x !== -1 && !d.fixed) {\n          const dist = dist2D(d, mousePos);\n          if (dist < 25) {\n            // Snap to cursor\n          } else if (dist < 250) {\n            const invDist = Math.pow(clamp01(1 - (6 * dist) / height), 2);\n            const deltaX = d.x - mousePos.x;\n            const deltaY = d.y - mousePos.y;\n            const dir = normalize2D(deltaX, deltaY);\n            d.x += dir.x * invDist * 12 * alpha;\n            d.y += dir.y * invDist * 12 * alpha;\n          }\n        }\n      });\n    });\n  /*\n    .force(\"growth\", (alpha) => {\n      const multiplier = Math.pow(alpha, 1);\n\n      nodes.forEach((node) => {\n        // Cause nodes to be above their parents\n        if (node.parent && node.y > node.parent.y - 1000) {\n          node.y -= multiplier * 6;\n        }\n      });\n    })\n    .force(\"bounding\", (alpha) => {\n      nodes.forEach((node) => {\n        const wallRepulsionX =\n          alpha *\n          Math.max(1, Math.abs(node.x + offsetX) - (width / 2 - marginX));\n        node.x -= Math.sign(node.x) * wallRepulsionX;\n        // const wallRepulsionY =\n        //   alpha * Math.max(1, Math.abs(node.y) - (height / 2 - marginY));\n        // node.y -= Math.sign(node.y) * wallRepulsionY;\n      });\n    });*/\n};\n\nconst getNodeLabel = (d) => {\n  if (d.children) return `${d.data.name}`;\n  else return herbInfo[d.data.id].commonName[lang];\n};\n\nexport const drawTree = (ref, simulation, nodes, links) => {\n  containerEl = ref.current;\n\n  svg = d3\n    .select(containerEl)\n    .append(\"svg\")\n    .attr(\"viewBox\", [-width / 2, -height / 2, width, height])\n    .lower();\n\n  link = svg\n    .append(\"g\")\n    .selectAll(\"line\")\n    .data(links)\n    .join(\"line\")\n    .attr(\"class\", \"link\")\n    .attr(\"stroke-width\", (d) => {\n      const rank = d.target.data.rank[\"en\"];\n      switch (rank) {\n        case \"Cladus\":\n          return 3;\n        case \"Ordo\":\n          return 2;\n        case \"Familia\":\n          return 1.5;\n        default:\n          return 1;\n      }\n    })\n    .attr(\"opacity\", 0);\n\n  node = svg\n    .append(\"g\")\n    .selectAll(\"g\")\n    .data(nodes)\n    .join(\"g\")\n    .attr(\"class\", (d) => `node node-${d.data.slug}`)\n    .classed(\"internode\", (d) => d.children)\n    .classed(\"moreInfo\", (d) => d.data.slug in familyInfo)\n    .classed(\"leaf\", (d) => !d.children)\n    .attr(\"id\", (d) => d.data.id);\n\n  // Internode\n  node\n    .filter((d) => d.children)\n    .append(\"circle\")\n    .attr(\"r\", (d) => (d.data.slug in familyInfo ? 2 : 1.5))\n    .attr(\"transform\", \"scale(0.01)\");\n\n  // Internode hover areas\n  node\n    .filter((d) => d.children)\n    .append(\"circle\")\n    .attr(\"r\", 18)\n    .attr(\"fill-opacity\", 0)\n    .attr(\"stroke-width\", 0);\n\n  // Leaf images\n  const imageCenter = -imageSize / 2;\n  node\n    .filter((d) => !d.children)\n    .append(\"svg:image\")\n    .attr(\"xlink:href\", (d) => `/herbs/images/icons/${d.data.slug}.png`)\n    .attr(\"class\", (d) => `image-${d.data.slug}`)\n    .on(\"error\", function (d) {\n      d3.select(this).attr(\"xlink:href\", \"/herbs/images/herb.png\");\n    })\n    .attr(\"x\", imageCenter)\n    .attr(\"y\", imageCenter)\n    .attr(\"width\", imageSize)\n    .attr(\"height\", imageSize)\n    .attr(\"transform\", \"scale(0.01)\");\n\n  // Leaf circle overlays\n  node\n    .filter((d) => !d.children)\n    .append(\"circle\")\n    .attr(\"class\", \"imageOverlay\")\n    .attr(\"r\", collisionRadius + 4);\n\n  // Minimal leaf nodes\n  node\n    .filter((d) => !d.children)\n    .append(\"circle\")\n    .attr(\"class\", \"minimalLeaf\")\n    .attr(\"r\", 3);\n\n  // Mouse hover effect\n  svg.on(\"mousemove\", handleMouseMove);\n\n  // Leaf text\n  text = svg\n    .append(\"g\")\n    .attr(\"class\", \"textGroup\")\n    .selectAll(\"g\")\n    .data(nodes)\n    .join(\"g\")\n    .append(\"text\")\n    .text(getNodeLabel)\n    .attr(\"class\", \"nodeText\")\n    .classed(\"visible\", (d) => !d.children)\n    .attr(\"text-anchor\", \"middle\")\n    .attr(\"y\", (d) => (d.children ? -5 : 0))\n    .attr(\"opacity\", 0);\n  return { svg, link, node, text };\n};\n\nexport const printLayout = () => {\n  const lineColor = \"#ccc\";\n  const bgColor = \"#fff\";\n  document.body.style.backgroundImage = \"none\";\n  document.body.style.backgroundColor = bgColor;\n\n  simulation.alpha(0).stop();\n\n  // Position images\n  const imageCenter = imageSize * 0.5;\n  const imageCenterTransform = `translate(${imageCenter} ${imageCenter})`;\n  node\n    .filter((d) => !d.children)\n    .selectAll(\"image\")\n    .attr(\"transform\", imageCenterTransform);\n\n  // Style graph\n  svg\n    .selectAll(\".link\")\n    .attr(\"class\", \"\")\n    .attr(\"stroke-width\", 1)\n    .attr(\"stroke\", lineColor);\n\n  node\n    .selectAll(\".internode circle\")\n    .attr(\"r\", 2)\n    .attr(\"fill\", lineColor)\n    .attr(\"stroke\", bgColor)\n    .attr(\"stroke-width\", 1);\n\n  node.selectAll(\".leaf circle\").remove();\n\n  text.filter((d) => d.children).remove();\n\n  svg\n    .selectAll(\"text\")\n    .attr(\"class\", \"\")\n    .attr(\"style\", \"direction: rtl\")\n    .attr(\"stroke-width\", 0)\n    .attr(\"font-size\", \"8\")\n    .attr(\"font-family\", \"ArbelHagilda\");\n};\n\nexport const setupTooltip = (tooltipRef) => {\n  tooltipContainer = d3.select(tooltipRef.current);\n\n  tooltip = tooltipContainer\n    .append(\"div\")\n    .attr(\"class\", \"tooltip\")\n    .style(\"opacity\", 0);\n};\n\nconst handleHover = (\n  d,\n  svg,\n  link,\n  node,\n  text,\n  tooltip,\n  tooltipContainer,\n  onSubtreeActivate\n) => {\n  const { slug, name, rank } = d.data;\n\n  onSubtreeActivate(true, slug, d.children !== undefined);\n  const currNode = d3.select(`.node-${slug}`);\n\n  if (d.children) {\n    currNode.raise();\n    svg.classed(\"inactive\", true);\n\n    setSubtreeActive(d, true);\n\n    node.classed(\"active\", (d) => d.isActive);\n    text.classed(\"active\", (d) => d.isActive);\n    link.classed(\"active\", (d) => d.source.isActive);\n\n    const nodeInfo = familyInfo[slug];\n\n    if (nodeInfo) {\n      tooltip.html(\n        `<img src=\"/herbs/images/family-icons/${slug}.png\">\n        <h4>${nodeInfo.name[lang]} /<span> ${rank[lang]}</span></h4>\n        <p>${nodeInfo.description[lang]}</p>`\n      );\n    } else {\n      tooltip.html(`<h4>${name} /<span> ${rank[lang]}</span></h4>`);\n    }\n    tooltipContainer.attr(\n      \"style\",\n      `transform: translate(${2 * d.x}px,${2 * d.y}px)`\n    );\n    tooltip.transition().duration(300).style(\"opacity\", 1);\n  } else {\n    // d3.select(`.image-${slug}`).attr(\"transform\", `scale(1.1)`);\n  }\n};\n\nlet hoverTimer;\n\nconst setupInteractions = (parentComponent, onSubtreeActivate) => {\n  node\n    .on(\"mouseover\", (e, d) => {\n      hoverTimer = setTimeout(() => {\n        handleHover(\n          d,\n          svg,\n          link,\n          node,\n          text,\n          tooltip,\n          tooltipContainer,\n          onSubtreeActivate\n        );\n      }, 300);\n\n      // Show small internode on hover\n      d3.select(`.node-${d.data.slug} circle`)\n        .transition()\n        .duration(250)\n        .attr(\"transform\", \"scale(1)\");\n    })\n    .on(\"mouseout\", (e, d) => {\n      // Hide small internode on hover\n      if (d.data.children) {\n        d3.select(`.node-${d.data.slug}:not(.moreInfo) circle`)\n          .transition()\n          .duration(250)\n          .attr(\"transform\", \"scale(0.01)\");\n      }\n\n      clearTimeout(hoverTimer);\n      if (d.children) {\n        svg.classed(\"inactive\", false);\n        setSubtreeActive(d, false);\n\n        const { id } = d.data;\n        text.filter((d) => d.data.id === id).classed(\"visible\", false);\n\n        tooltip.transition().duration(200).style(\"opacity\", 0);\n        onSubtreeActivate(false);\n      }\n    })\n    .on(\"click\", (e, d) => {\n      parentComponent.handleClick(e, d);\n    });\n\n  text.on(\"click\", (e, d) => {\n    parentComponent.handleClick(e, d);\n  });\n\n  if (allowDrag) setupDrag();\n};\n\nexport const setupDrag = () => {\n  console.log(\"Ma kore?\");\n\n  if (!allowDrag) node.filter((d) => d.depth > 0).call(drag(simulation));\n  allowDrag = true;\n};\n\nexport const growTree = (growthTime = 550, growImages = true) => {\n  svg.attr(\"opacity\", 1);\n\n  link\n    .attr(\"opacity\", 1)\n    .attr(\"stroke-dasharray\", (d) => linkLength(d) + \" \" + linkLength(d))\n    .attr(\"stroke-dashoffset\", (d) => linkLength(d))\n    .transition()\n    .delay((d) => d.source.depth * growthTime - 100)\n    .duration((d) => growthTime)\n    .ease(d3.easeLinear)\n    .attr(\"stroke-dashoffset\", 0)\n    .end()\n    .then(function (e) {\n      link.attr(\"stroke-dasharray\", \"none\");\n    });\n\n  svg\n    .selectAll(\".moreInfo circle\")\n    .transition()\n    .delay((d) => d.depth * growthTime - 100)\n    .duration(growthTime)\n    .attr(\"transform\", \"\")\n    .end();\n  // .then(callback);\n\n  svg\n    .selectAll(\"text\")\n    .transition()\n    .delay((d) => d.depth * growthTime + 500)\n    .duration(growthTime)\n    .attr(\"opacity\", 1)\n    .end();\n\n  svg\n    .selectAll(\".leaf circle\")\n    .transition()\n    .delay((d) => d.depth * growthTime + 600 * Math.random() - 300)\n    .duration(growthTime)\n    .attr(\"opacity\", 1);\n\n  if (growImages) {\n    svg\n      .selectAll(\"image\")\n      .attr(\"opacity\", 1)\n      .transition()\n      .delay((d) => d.depth * growthTime + 600 * Math.random() - 300)\n      .duration(growthTime)\n      .attr(\"transform\", \"scale(1)\");\n  }\n};\n\nexport const unGrowTree = (duration = 300) => {\n  // Hide all\n  svg\n    .transition()\n    .duration(duration)\n    .attr(\"opacity\", 0)\n    .end()\n    .then(() => {\n      scrollContainerToBottom();\n      //Ungrow\n      svg.selectAll(\".moreInfo circle\").attr(\"transform\", \"scale(0.01)\");\n      svg.selectAll(\".leaf circle\").attr(\"opacity\", 0);\n    });\n};\n\nconst scrollContainerToBottom = () => {\n  const scrollingContainer = containerEl.parentElement;\n\n  const { scrollWidth, offsetWidth } = scrollingContainer;\n  const maxScroll = scrollWidth - offsetWidth;\n  scrollingContainer.scrollTo(maxScroll / 2, containerEl.scrollHeight);\n};\n\nconst setSubtreeActive = (root, isActive) => {\n  root.isActive = isActive;\n  root.children && root.children.forEach((d) => setSubtreeActive(d, isActive));\n};\n\nconst linkLength = (link) => {\n  return dist2D(link.source, link.target) + 3;\n};\n\nexport const updateGraphSize = (w, h) => {\n  width = w / 2;\n  height = h;\n  d3.select(svgEl).attr(\"viewBox\", [-width / 2, -height / 2, width, height]);\n  if (simulation) {\n    simulation.alpha(0.2).restart();\n\n    rootNode.fx = centerOffsetX;\n    rootNode.fy = 0.5 * height - 1 * marginY;\n  }\n};\n\nconst highlightDuration = 600;\n\nexport const highlightHerb = (slug) => {\n  svg\n    .selectAll(\"image\")\n    .raise()\n    .transition()\n    .attr(\"opacity\", (d) => (d.data.slug === slug ? 1 : 0));\n\n  for (let el of document.getElementsByClassName(\"highlighted\")) {\n    d3.select(el).classed(\"highlighted\", false);\n  }\n  if (slug) {\n    const herbNode = document.getElementsByClassName(`node-${slug}`)[0];\n    d3.select(herbNode)\n      .raise()\n      .classed(\"highlighted\", true)\n      .select(\"image\")\n      .transition()\n      .duration(highlightDuration / 2)\n      .attr(\"transform\", \"scale(2)\")\n      .attr(\"opacity\", 1);\n\n    positionHighlightedHerb(highlightDuration);\n  }\n};\n\nlet positionHerbDuration = highlightDuration;\n\nexport const positionHighlightedHerb = (duration = 0) => {\n  const herbNode = document.getElementsByClassName(`highlighted`)[0];\n  if (herbNode) {\n    const { scrollTop } = containerEl.parentElement;\n\n    const herbRotation = degToRad(herbNode.transform.baseVal[1].angle);\n    let x = -2 * herbNode.transform.baseVal[0].matrix.e;\n    let y = -2 * herbNode.transform.baseVal[0].matrix.f;\n\n    const moveX = width < 700 ? width - (70 + 80) : 550;\n\n    let scrollRight = 0;\n    if (width * 2 <= TABLET_WIDTH) {\n      const scrollingContainer = containerEl.parentElement;\n      const { scrollLeft, offsetWidth } = scrollingContainer;\n      const maxScroll = TABLET_WIDTH - offsetWidth;\n      scrollRight = maxScroll - scrollLeft;\n    }\n\n    x += moveX - 10 * Math.sin(herbRotation) - scrollRight;\n    y += -520 + scrollTop - 25 * clamp01(-Math.cos(herbRotation));\n\n    const dist = Math.sqrt(Math.sqrt(x * x + y * y));\n    positionHerbDuration = dist * 35;\n\n    svg\n      .transition()\n      .duration(positionHerbDuration)\n      .attr(\"style\", `transform: translate(${x}px, ${y}px)`);\n  }\n};\n\nexport const unhighlightAll = (scaleImages) => {\n  if (scaleImages) {\n    svg\n      .selectAll(\"image\")\n      .transition()\n      .duration(highlightDuration)\n      .attr(\"transform\", \"scale(1)\")\n      .attr(\"opacity\", 1)\n      .end()\n      .then(() => {\n        svg.selectAll(\"image\").lower();\n      });\n  }\n\n  for (let el of document.getElementsByClassName(\"highlighted\")) {\n    d3.select(el).classed(\"highlighted\", false);\n  }\n\n  d3.select(containerEl).attr(\"style\", \"\");\n\n  svg\n    .transition()\n    .duration(positionHerbDuration)\n    .attr(\"style\", \"transform: translate(0px,0px)\");\n};\n\nfunction handleMouseMove(event) {\n  const { x, offsetY } = event;\n  if (width * 2 > TABLET_WIDTH) {\n    mousePos = {\n      x: (x - width) / 2,\n      y: (offsetY - height) / 2,\n    };\n    simulation.alpha(0.2).restart();\n  }\n}\n\nconst drag = (simulation) => {\n  function dragstarted(event, d) {\n    if (!event.active) simulation.alphaTarget(0.4).restart();\n    d.fx = d.x;\n    d.fy = d.y;\n  }\n  function dragged(event, d) {\n    d.fx = event.x;\n    d.fy = event.y;\n  }\n  function dragended(event, d) {\n    if (!event.active) simulation.alphaTarget(0);\n    d.fx = null;\n    d.fy = null;\n  }\n  return d3\n    .drag()\n    .on(\"start\", dragstarted)\n    .on(\"drag\", dragged)\n    .on(\"end\", dragended);\n};\n","import React from \"react\";\nimport { motion } from \"framer-motion\";\n\nconst FadeInOut = ({ children, enterDelay, ...rest }) => {\n  return (\n    <motion.div\n      {...rest}\n      initial={{ opacity: 0 }}\n      animate={{\n        transition: { delay: enterDelay ? enterDelay : 0 },\n        opacity: 1,\n      }}\n      exit={{ opacity: 0 }}\n      transition={{ duration: 0.15 }}\n    >\n      {children}\n    </motion.div>\n  );\n};\n\nexport default FadeInOut;\n","import React from \"react\";\nimport { Redirect } from \"react-router-dom\";\n\nimport FadeInOut from \"../../components/FadeInOut/FadeInOut\";\n\nimport \"./HomePage.scss\";\n\nclass HomePage extends React.Component {\n  componentDidMount() {}\n\n  render() {\n    if (this.props.shouldShowIntro) {\n      return <Redirect to=\"/intro\" />;\n    }\n    return <FadeInOut className=\"HomePage\"></FadeInOut>;\n  }\n}\n\nexport default HomePage;\n","import React from \"react\";\n\nimport \"./Button.scss\";\n\nconst Button = ({ children, ...rest }) => {\n  return (\n    <button {...rest} className=\"Button\">\n      {children}\n    </button>\n  );\n};\n\nexport default Button;\n","// const lang = \"en\";\nconst lang = \"he\";\nexport default lang;\n","import React, { useState } from \"react\";\nimport { AnimatePresence } from \"framer-motion\";\nimport { Route, Switch, useLocation, useHistory } from \"react-router-dom\";\nimport HomePage from \"./pages/HomePage/HomePage\";\nimport IntroPage from \"./pages/IntroPage/IntroPage\";\nimport AboutPage from \"./pages/AboutPage/AboutPage\";\nimport AllRecipesPage from \"./pages/AllRecipesPage/AllRecipesPage\";\nimport RecipePage from \"./pages/RecipePage/RecipePage\";\nimport HerbPage from \"./pages/HerbPage/HerbPage\";\nimport HerbTree from \"./components/HerbTree/HerbTree\";\nimport Search from \"./components/Search/Search\";\nimport Menu from \"./components/Menu/Menu\";\n\nlet DEBUG = false;\n\n// refresh if no interaction\nlet timeout;\ndocument.onmousemove = function () {\n  clearTimeout(timeout);\n  timeout = setTimeout(function () {\n    window.location.href = \"/\";\n  }, 5 * 60 * 1000);\n};\n\nconst App = () => {\n  const history = useHistory();\n  const location = useLocation();\n\n  if (window.history.scrollRestoration)\n    window.history.scrollRestoration = \"manual\";\n\n  const [shouldShowIntro, setShouldShowIntro] = useState(\n    location.pathname === \"/\"\n  );\n\n  const handleNodeClick = (node) => {\n    history.push(`/herb/${node.slug}`);\n  };\n\n  return (\n    <div>\n      <Menu />\n      <Search />\n      <HerbTree onNodeClick={handleNodeClick} debug={DEBUG} />\n      <AnimatePresence exitBeforeEnter>\n        <Switch location={location} key={location.pathname}>\n          <Route exact path=\"/\">\n            <HomePage shouldShowIntro={shouldShowIntro} />\n          </Route>\n          <Route exact path=\"/intro\">\n            <IntroPage onMount={() => setShouldShowIntro(false)} />\n          </Route>\n          <Route exact path=\"/about\">\n            <AboutPage />\n          </Route>\n          <Route exact path=\"/recipes\">\n            <AllRecipesPage />\n          </Route>\n          <Route exact path=\"/recipes/:slug\">\n            <RecipePage />\n          </Route>\n          <Route path=\"/herb/:slug\">\n            <HerbPage />\n          </Route>\n        </Switch>\n      </AnimatePresence>\n    </div>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport randomTree from \"../../data/randomTree.json\";\nimport {\n  initTree,\n  updateGraphSize,\n  showProtoPlant,\n  moveProtoPlant,\n  growTree,\n  fadeOut,\n} from \"./introGraphUtils\";\nimport * as GraphUtils from \"../HerbTree/graphUtils\";\n\nimport \"./IntroGraph.scss\";\n\nclass IntroGraph extends React.Component {\n  constructor(props) {\n    super(props);\n    this.d3ref = React.createRef();\n    // this.tree = removeSingleChildren(getRandomTree(8));\n    this.tree = randomTree;\n  }\n\n  componentDidMount() {\n    this.setGraphSize();\n\n    this.simulation = initTree(this.d3ref, this.tree, this);\n    // moveProtoPlant().then(growTree);\n\n    window.addEventListener(\"resize\", (e) => this.handleResize(e));\n  }\n\n  handleResize(e) {\n    this.setGraphSize();\n  }\n\n  setGraphSize() {\n    const w = document.documentElement.clientWidth;\n    const h = document.documentElement.clientHeight;\n    updateGraphSize(w, h);\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.page !== prevProps.page) {\n      this.updateGraph(this.props.page);\n    }\n  }\n\n  updateGraph(page) {\n    switch (page) {\n      case 1:\n        GraphUtils.unGrowTree();\n        showProtoPlant();\n        break;\n      case 2:\n        moveProtoPlant().then(() => {\n          growTree();\n          GraphUtils.growTree(550, false);\n        });\n        break;\n      case 3:\n        fadeOut();\n        break;\n      default:\n        break;\n    }\n  }\n\n  logTree() {\n    const nodePositions = {};\n    this.simulation.nodes().forEach((node, i) => {\n      nodePositions[node.data.id] = { x: node.x, y: node.y };\n    });\n    console.log(JSON.stringify(this.tree));\n\n    console.log(JSON.stringify(nodePositions));\n  }\n\n  render() {\n    return (\n      <div className=\"IntroGraph\" ref={this.d3ref}>\n        {/*<button onClick={() => this.logTree()}>Log Tree</button>*/}\n      </div>\n    );\n  }\n}\n\n// const leafNode = { children: [] };\n// const NUM_CHILDREN = [1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 3, 4];\n// const NUM_CHILDREN_LEN = NUM_CHILDREN.length;\n// let nodeId = 0;\n//\n// const getRandomTree = (depth) => {\n//   const node = { id: nodeId++, children: [] };\n//   if (depth === 0) return node;\n//   const numChilren = NUM_CHILDREN[Math.floor(Math.random() * NUM_CHILDREN_LEN)];\n//   for (let i = 0; i < numChilren; i++) {\n//     node.children.push(randomTree(depth - 1));\n//   }\n//   return node;\n// };\n//\n// const removeSingleChildren = (node) => {\n//   if (node.children) node.children.forEach(removeSingleChildren);\n//   if (node.children && node.children.length === 1) {\n//     const { id, children } = node.children[0];\n//     node.id = id;\n//     node.children = children;\n//   }\n//   return node;\n// };\n\nexport default IntroGraph;\n","import React, { useState, useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { AnimatePresence } from \"framer-motion\";\n\nimport Button from \"../../components/Button/Button\";\nimport FadeInOut from \"../../components/FadeInOut/FadeInOut\";\nimport IntroGraph from \"../../components/IntroGraph/IntroGraph\";\n\nimport \"./IntroPage.scss\";\n\nconst IntroPage = (props) => {\n  const [page, setPage] = useState(0);\n\n  useEffect(() => {\n    props.onMount();\n  });\n\n  return (\n    <FadeInOut className=\"IntroPage\">\n      <IntroGraph page={page} />\n      <AnimatePresence exitBeforeEnter>\n        {renderPage(page, setPage)}\n      </AnimatePresence>\n      {page !== 3 && (\n        <Link to=\"/\" className=\"Skip\">\n          <Button>דלג לאתר ></Button>\n        </Link>\n      )}\n    </FadeInOut>\n  );\n};\n\nconst renderPage = (page, setPage) => {\n  switch (page) {\n    case 0:\n      return (\n        <FadeInOut className=\"page P0\" key=\"P0\">\n          <h1>על טעם וריח</h1>\n          <h2>מדריך לעשבי תיבול במטבח</h2>\n          <Button onClick={() => setPage(1)}>מה זה?</Button>\n        </FadeInOut>\n      );\n    case 1:\n      return (\n        <FadeInOut className=\"page P1\" key=\"P1\" enterDelay={0.8}>\n          <p>כל הצמחים בעולם התפתחו מאב קדמון אחד.</p>\n          <Button onClick={() => setPage(2)}>המשך</Button>\n        </FadeInOut>\n      );\n    case 2:\n      return (\n        <FadeInOut className=\"page P2\" key=\"P2\" enterDelay={2.5}>\n          <p>לאורך עידנים צאצאיו השתנו, התפתחו והתפצלו לאינספור צמחים שונים.</p>\n          <Button onClick={() => setPage(3)}>אוקיי</Button>\n        </FadeInOut>\n      );\n    case 3:\n      return (\n        <FadeInOut className=\"page P3\" key=\"P3\" enterDelay={1}>\n          <p>\n            האתר שלפניכם נותן הצצה לעץ החיים הענק הזה, דרך צמחי התבלין. בנוסף\n            תוכלו למצוא הסברים, מתכונים, ושימושים לצמחים השונים.\n          </p>\n          <Link to=\"/\">\n            <Button>לאתר ></Button>\n          </Link>\n        </FadeInOut>\n      );\n    default:\n      return \"\";\n  }\n};\n\nexport default IntroPage;\n","import React from \"react\";\n\nconst OutLink = ({ href, children, ...rest }) => {\n  return (\n    <a href={href} target=\"_blank\" rel=\"noreferrer\">\n      {children}\n    </a>\n  );\n};\n\nexport default OutLink;\n","import React from \"react\";\n\nimport FadeInOut from \"../../components/FadeInOut/FadeInOut\";\nimport OutLink from \"../../components/OutLink/OutLink\";\n\nimport \"./AboutPage.scss\";\n\nconst AboutPage = (props) => {\n  return (\n    <FadeInOut className=\"AboutPage PageContainer\">\n      <main>\n        <h1>אודות האתר</h1>\n        <p>\n          מאת&nbsp;\n          <OutLink href=\"https://www.instagram.com/yonshamir/\">\n            יונתן שמיר\n          </OutLink>\n        </p>\n        <p>\n          תמונות הצמחים באתר צולמו ב\n          <OutLink href=\"http://nnhc.huji.ac.il/herbarium/\">\n            עשביית האוניברסיטה העברית\n          </OutLink>\n          <br />\n          תודה על האירוח והגישה לאוספים\n        </p>\n        <p>\n          מידע על הסיווג המדעי של הצמחים מ-\n          <OutLink href=\"https://species.wikimedia.org\">Wikispecies</OutLink>\n        </p>\n        <p>תודה לאמיתי גלעד על ההנחייה והליווי</p>\n        <p>תודה לרונית ורד על ההשראה והייעוץ הקולינרי</p>\n        <p>תודה לפרופ' נתיב דודאי על המידע המדעי</p>\n        <p>תודה לטורקיה על הייעוץ, המתכונים והבישולים המשותפים</p>\n        <p>תודה לשי על התמיכה והעזרה בהכל</p>\n\n        <br />\n        <br />\n        <br />\n        <br />\n        <br />\n        <br />\n        <br />\n        <br />\n        <br />\n        <p>\n          <img\n            src=\"/herbs/images/ui/bezalel.svg\"\n            className=\"BezalelLogo\"\n            alt=\"בצלאל\"\n          />\n          בצלאל אקדמיה לאמנות ועיצוב\n        </p>\n        <p></p>\n      </main>\n    </FadeInOut>\n  );\n};\n\nexport default AboutPage;\n","import React, { useState, useEffect } from \"react\";\n\nimport \"./Image.scss\";\n\nconst Image = ({\n  alt,\n  ratio = 1,\n  style = {},\n  className = \"\",\n  minTimeToLoad = 400,\n  ...rest\n}) => {\n  const [hasImageLoaded, setHasImageLoaded] = useState(false);\n  const [isTimerComplete, setIsTimerComplete] = useState(false);\n\n  useEffect(() => {\n    setTimeout(() => setIsTimerComplete(true), minTimeToLoad);\n  });\n\n  const onImageLoaded = (event) => {\n    setHasImageLoaded(true);\n  };\n\n  return (\n    <div className={\"imageWrapper \" + className}>\n      <img\n        {...rest}\n        onLoad={onImageLoaded}\n        className={hasImageLoaded && isTimerComplete ? \"image loaded\" : \"image\"}\n        alt={alt}\n      />\n    </div>\n  );\n};\n\nexport default Image;\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport Image from \"../Image/Image\";\n\nimport \"./RecipePreview.scss\";\n\nconst RecipePreview = ({ recipe }) => {\n  const { title, herbs, slug, time, difficulty } = recipe;\n  return (\n    <Link to={`/recipes/${slug}`} className=\"RecipePreview\">\n      <Image\n        className=\"RecipePhoto\"\n        src={`/herbs/images/recipes/${slug}/cover.jpg`}\n        alt={title}\n      />\n      <div className=\"RecipeInfo\">\n        {herbs.map((herb) => (\n          <img\n            className=\"HerbIcon\"\n            src={`/herbs/images/icons/${herb.slug}.png`}\n            alt={herb.slug}\n            key={herb.slug}\n          />\n        ))}\n        <h2>{title}</h2>\n        <p>\n          {time} | {difficulty}\n        </p>\n      </div>\n    </Link>\n  );\n};\n\nexport default RecipePreview;\n","import React from \"react\";\n\nimport recipeInfo from \"../../data/recipeInfo.json\";\n\nimport FadeInOut from \"../../components/FadeInOut/FadeInOut\";\nimport RecipePreview from \"../../components/RecipePreview/RecipePreview\";\n\nimport \"./AllRecipesPage.scss\";\n\nconst AllRecipesPage = (props) => {\n  return (\n    <FadeInOut className=\"AllRecipesPage PageContainer\">\n      <main>\n        <h1>מתכונים</h1>\n        {recipeInfo.map((recipe) => (\n          <RecipePreview key={recipe.slug} recipe={recipe} />\n        ))}\n      </main>\n    </FadeInOut>\n  );\n};\n\nexport default AllRecipesPage;\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\n\nimport \"./HerbLink.scss\";\n\nconst HerbLink = ({ slug, title, inline }) => {\n  const herbUrl = `/herb/${slug}`;\n  return inline ? (\n    <Link to={herbUrl} className=\"InlineHerbLink\">\n      <span className=\"herbSmallIcon\">\n        <img src={`/herbs/images/icons/${slug}.png`} alt={title} />\n      </span>\n      <span className=\"linkText\">{title}</span>\n    </Link>\n  ) : (\n    <Link to={herbUrl} className=\"HerbLink\">\n      <img src={`/herbs/images/icons/${slug}.png`} alt={title} />\n      {title}\n    </Link>\n  );\n};\n\nexport default HerbLink;\n","import React from \"react\";\n\nimport \"./ZaatarBlends.scss\";\n\nconst blendInfo = [\n  {\n    slug: \"industrial\",\n    title: \"תעשייתי\",\n    ingredients: [\"עלי זעתר\", \"מלח לימון\", \"שומשום\", \"מלח\", \"חיטה\"],\n  },\n  {\n    slug: \"palestine\",\n    title: \"פלסטיני\",\n    ingredients: [\"עלי זעתר\", \"סומק\", \"שומשום\", \"מלח\", \"שמן זית\"],\n  },\n  {\n    slug: \"lebannon\",\n    title: \"לבנוני\",\n    ingredients: [\"עלי זעתר\", \"סומק\", \"שומשום\", \"מלח\", \"חומוס קלוי\"],\n  },\n  {\n    slug: \"syria\",\n    title: \"סורי\",\n    ingredients: [\n      \"עלי זעתר\",\n      \"סומק\",\n      \"שומשום\",\n      \"מלח\",\n      \"חומוס קלוי\",\n      \"אגוזי מלך\",\n      \"פיסטוק\",\n      \"גרעיני דלעת\",\n      \"כמון\",\n      \"קימל\",\n    ],\n  },\n];\n\nconst ZaatarBlends = (props) => {\n  return (\n    <span className=\"ZaatarBlends\">\n      {blendInfo.map((blend) => (\n        <span className=\"blend\" key={blend.slug}>\n          <span className=\"blend-title\">{blend.title}</span>\n          {blend.ingredients.map((name, i) => (\n            <span className=\"pile\" key={blend.slug + i}>\n              <img\n                src={`/herbs/images/recipes/zaatar-mix/blends/${blend.slug}/${i}.png`}\n                alt={name}\n              />\n              <span className=\"label\">{name}</span>\n            </span>\n          ))}\n          <span className=\"blend-title\">\n            <br />\n            {blend.title}\n          </span>\n        </span>\n      ))}\n    </span>\n  );\n};\n\nexport default ZaatarBlends;\n","import React from \"react\";\nimport ReactMarkdown from \"react-markdown\";\nimport { withRouter, Link } from \"react-router-dom\";\n\nimport recipeInfo from \"../../data/recipeInfo.json\";\n\nimport FadeInOut from \"../../components/FadeInOut/FadeInOut\";\nimport HerbLink from \"../../components/HerbLink/HerbLink\";\nimport ZaatarBlends from \"../../components/ZaatarBlends/ZaatarBlends\";\n\nimport \"./RecipePage.scss\";\n\nclass RecipePage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { md: \"טוען...\", imageLoaded: false, timerComplete: false };\n  }\n\n  async componentDidMount() {\n    const { slug } = this.props.match.params;\n    const response = await fetch(`/recipe-pages/${slug}.md`);\n    const text = await response.text();\n\n    this.setState({\n      md: text,\n    });\n\n    window.scrollTo(0, 0);\n    setTimeout(() => this.setState({ timerComplete: true }), 500);\n  }\n\n  renderLink({ href, children, title }) {\n    const hrefParts = href.split(\"/\");\n    if (hrefParts[1] === \"herb\") {\n      const slug = hrefParts[2];\n      return <HerbLink slug={slug} title={children} inline />;\n    }\n\n    return <Link to={href}>{children}</Link>;\n  }\n\n  renderImage({ src, alt }) {\n    const { slug } = this.props.match.params;\n    const metadata = alt.trim().split(\"/\");\n    const className = metadata[0];\n    if (className === \"InlineImage\") {\n      const altText = metadata.length > 1 ? metadata[1] : \"\";\n      return (\n        <span className={className}>\n          <img src={`/herbs/images/recipes/${slug}/${src}`} alt={altText} />\n          <span className=\"label\">{altText}</span>\n        </span>\n      );\n    }\n    if (className === \"ZaatarBlends\") return <ZaatarBlends />;\n\n    return (\n      <img\n        src={`/herbs/images/recipes/${slug}/${src}`}\n        alt={alt}\n        className={className}\n      />\n    );\n  }\n\n  render() {\n    const { slug } = this.props.match.params;\n    const { imageLoaded, timerComplete } = this.state;\n\n    const recipe = recipeInfo.filter((recipe) => recipe.slug === slug)[0];\n    const { title, herbs, time, difficulty, author } = recipe;\n\n    return (\n      <FadeInOut className=\"RecipePage PageContainer\">\n        <main>\n          <div className=\"RecipePhoto\">\n            <img\n              className={imageLoaded && timerComplete ? \"loaded\" : \"\"}\n              src={`/herbs/images/recipes/${slug}/main.jpg`}\n              alt={title}\n              onLoad={() => this.setState({ imageLoaded: true })}\n            />\n          </div>\n          <div className=\"RecipeHerbs\">\n            {herbs.map((herb) => (\n              <HerbLink slug={herb.slug} title={herb.title} key={herb.slug} />\n            ))}\n          </div>\n          <h1>{title}</h1>\n          <p className=\"RecipeMetadata\">\n            מאת {author} | {time} | {difficulty}\n          </p>\n          <ReactMarkdown\n            components={{\n              a: this.renderLink,\n              img: (props) => this.renderImage(props),\n              // code: this.renderCustomComponent,\n            }}\n          >\n            {this.state.md}\n          </ReactMarkdown>\n        </main>\n      </FadeInOut>\n    );\n  }\n}\n\nexport default withRouter(RecipePage);\n","import React from \"react\";\nimport lang from \"../../lang\";\nimport \"./HerbSummary.scss\";\n\nconst HerbSummary = (props) => {\n  const { slug, herb, family } = props;\n  const altNames = herb.altNames[lang];\n\n  return (\n    <div className=\"HerbSummary\">\n      <img\n        className=\"HerbIcon\"\n        id=\"herb-icon\"\n        src={`/herbs/images/icons/${slug}.png`}\n        alt={slug}\n      />\n      <table className=\"InfoTable\">\n        <tbody>\n          <tr>\n            <td colSpan=\"2\" className=\"scientificName\">\n              {herb.name}\n            </td>\n          </tr>\n          <tr>\n            <th>באנגלית</th>\n            <td>{herb.commonName[\"en\"]}</td>\n          </tr>\n          {altNames ? (\n            <tr>\n              <th>שמות נוספים</th>\n              <td>{altNames}</td>\n            </tr>\n          ) : null}\n          <tr>\n            <th>משפחה</th>\n            <td>{family.name[lang]}</td>\n          </tr>\n          <tr>\n            <th>צורת חיים</th>\n            <td>\n              {herb.lifeform[lang]} {herb.lifecycle[lang]}\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  );\n};\n\nexport default HerbSummary;\n","import React from \"react\";\nimport ReactMarkdown from \"react-markdown\";\nimport { withRouter, Link } from \"react-router-dom\";\nimport lang from \"../../lang\";\n\nimport FadeInOut from \"../../components/FadeInOut/FadeInOut\";\nimport HerbSummary from \"../../components/HerbSummary/HerbSummary\";\nimport HerbLink from \"../../components/HerbLink/HerbLink\";\nimport herbInfo from \"../../data/herbInfo.json\";\nimport familyInfo from \"../../data/familyInfo.json\";\nimport recipeInfo from \"../../data/recipeInfo.json\";\n\nimport \"./HerbPage.scss\";\n\nclass HerbPage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { md: \"טוען...\", imageLoaded: false, timerComplete: false };\n  }\n\n  async componentDidMount() {\n    const { slug } = this.props.match.params;\n    const response = await fetch(`../herb-pages/${slug}.md`);\n    const text = await response.text();\n\n    this.setState({\n      md: text,\n    });\n\n    window.scrollTo(0, 0);\n\n    setTimeout(() => this.setState({ timerComplete: true }), 1100);\n  }\n\n  renderLink({ href, children, title }) {\n    if (title === \"HerbIcon\") return <HerbLink slug={href} title={children} />;\n    const hrefParts = href.split(\"/\");\n    if (hrefParts.length < 2) {\n      return <HerbLink slug={href} title={children} inline />;\n    }\n\n    return <Link to={href}>{children}</Link>;\n  }\n\n  renderRecipes(herb) {\n    const { slug } = herb;\n    const recipes = recipeInfo.filter((recipe) =>\n      recipe.herbs.map((h) => h.slug).includes(slug)\n    );\n\n    if (recipes.length > 0) {\n      return (\n        <>\n          <h2>מתכונים</h2>\n          <p>\n            ניתן למצוא פה באתר רעיונות לשימושים של {herb.commonName[lang]}{\" \"}\n            בבישול:\n          </p>\n          <ul>\n            {recipes.map((recipe) => (\n              <li key={recipe.slug}>\n                <Link\n                  to={`../../recipes/${recipe.slug}`}\n                  className=\"RecipeLink\"\n                >\n                  {recipe.title + \" >\"}\n                </Link>\n              </li>\n            ))}\n          </ul>\n        </>\n      );\n    }\n  }\n\n  onTitleClick() {\n    const { slug } = this.props.match.params;\n\n    if (slug === \"dill\") this.props.history.push(\"/herb/dill/shamir\");\n  }\n\n  render() {\n    const { slug } = this.props.match.params;\n    const { imageLoaded, timerComplete } = this.state;\n    // const slug = \"bay-leaf\";\n    const herb = herbInfo.filter((herb) => herb.slug === slug)[0];\n    const familyName = herb.taxonomy.find((rank) =>\n      rank.hasOwnProperty(\"Familia\")\n    ).Familia;\n    const family = familyInfo[familyName.toLowerCase()];\n\n    return (\n      <FadeInOut className=\"HerbPage\">\n        <main>\n          {/*\n          <Link to=\"/\" className=\"backIcon\">\n            <IconButton icon=\"arrow-right\" label=\"חזרה לעץ\" />\n          </Link>*/}\n          <HerbSummary herb={herb} slug={slug} family={family} />\n          <div className=\"HerbContent\">\n            <div className=\"mainText\">\n              <h1 onClick={() => this.onTitleClick()}>\n                {herb.commonName[lang]}\n              </h1>\n              <ReactMarkdown\n                components={{\n                  a: this.renderLink,\n                  // code: this.renderCustomComponent,\n                }}\n              >\n                {this.state.md}\n              </ReactMarkdown>\n              <h2>משפחת ה{family.name[lang]}</h2>\n              <p>{family.description[lang]}</p>\n              {this.renderRecipes(herb)}\n            </div>\n          </div>\n          <div className=\"herbPhoto\">\n            <img\n              src={`../images/photos/${slug}.jpg`}\n              alt={herb.commonName[lang]}\n              className={imageLoaded && timerComplete ? \"loaded\" : \"\"}\n              onLoad={(e) => this.setState({ imageLoaded: true })}\n            />\n          </div>\n        </main>\n      </FadeInOut>\n    );\n  }\n}\n\nexport default withRouter(HerbPage);\n","import React from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport { debounce } from \"lodash\";\nimport taxonomyTree from \"../../data/taxonomyTree.json\";\nimport taxonomyTreeOverrides from \"../../data/taxonomyTreeOverrides.json\";\nimport {\n  initTree,\n  updateGraphSize,\n  highlightHerb,\n  unhighlightAll,\n  positionHighlightedHerb,\n  growTree,\n  printLayout,\n  setupDrag,\n} from \"./graphUtils\";\nimport { clamp } from \"../../utils/math\";\n\nimport \"./HerbTree.scss\";\n\nconst MIN_LOGO_OPACITY = 0;\nconst TABLET_WIDTH = 1000;\n\nclass HerbTree extends React.Component {\n  constructor(props) {\n    super(props);\n    this.containerRef = React.createRef();\n    this.d3ref = React.createRef();\n    this.tooltipRef = React.createRef();\n\n    this.state = {\n      logoOpacity: MIN_LOGO_OPACITY,\n      isHidden: true,\n      isMinimal: false,\n      isInteractive: true,\n      initalLoaded: false,\n      isSubtreeActive: false,\n    };\n\n    this.positionHighlightedHerbDebounced = debounce(\n      positionHighlightedHerb,\n      300\n    );\n  }\n\n  componentDidMount() {\n    this.setGraphSize();\n\n    const taxonomyTreePruned = applyNodeOverrides(\n      removeSingleChildren(JSON.parse(JSON.stringify(taxonomyTree)))\n    );\n    this.simulation = initTree(\n      this.d3ref,\n      this.tooltipRef,\n      taxonomyTreePruned,\n      this,\n      this.handleSubtreeActivate,\n      this.props.debug\n    );\n\n    window.addEventListener(\"resize\", (e) => this.handleResize(e));\n    this.scrollToBottomCenter();\n    setTimeout(() => {\n      this.onRouteChanged();\n      this.containerRef.current.addEventListener(\"scroll\", (e) =>\n        this.handleScroll(e)\n      );\n    }, 800);\n  }\n\n  scrollToBottomCenter() {\n    const { scrollWidth, offsetWidth } = this.containerRef.current;\n    const maxScroll = scrollWidth - offsetWidth;\n    this.containerRef.current.scrollTo({\n      left: maxScroll / 2,\n      top: this.d3ref.current.scrollHeight,\n      behavior: \"smooth\",\n    });\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"scroll\", this.handleScroll);\n  }\n\n  handleScroll() {\n    const currScroll = this.containerRef.current.scrollTop;\n\n    const opacityThreshold = 100;\n\n    if (currScroll > opacityThreshold) {\n      if (this.state.logoOpacity !== 0)\n        this.setState({ logoOpacity: MIN_LOGO_OPACITY });\n    } else {\n      this.setState({\n        logoOpacity: clamp(\n          1 - currScroll / opacityThreshold,\n          MIN_LOGO_OPACITY,\n          0.9\n        ),\n      });\n    }\n  }\n\n  handleResize(e) {\n    this.setGraphSize();\n    const routeParts = this.props.location.pathname.split(\"/\");\n    if (routeParts[1] === \"herb\") this.positionHighlightedHerbDebounced();\n  }\n\n  handleClick(event, node) {\n    if (node.height === 0) {\n      this.props.onNodeClick(node.data);\n    }\n  }\n\n  setGraphSize() {\n    const w = Math.max(document.documentElement.clientWidth, TABLET_WIDTH);\n    const h = 700;\n    updateGraphSize(w, h);\n  }\n\n  logPositions() {\n    const nodePositions = {};\n    this.simulation.nodes().forEach((node, i) => {\n      nodePositions[node.data.id] = { x: node.x, y: node.y };\n    });\n    console.log(JSON.stringify(nodePositions));\n  }\n\n  getPrintLayout() {\n    this.setState({ isInteractive: false });\n    printLayout();\n  }\n\n  handleSubtreeActivate = (isActive, slug, hasChildren) => {\n    if (!isActive && this.state.isSubtreeActive) {\n      this.setState({ isSubtreeActive: false });\n    } else if (hasChildren) {\n      this.setState({ isSubtreeActive: true });\n    }\n  };\n\n  componentDidUpdate(prevProps) {\n    if (this.props.location !== prevProps.location) {\n      this.onRouteChanged(prevProps.location);\n    }\n  }\n\n  onRouteChanged(prevLocation) {\n    const route = this.props.location.pathname;\n    const routeParts = route.split(\"/\");\n    if (routeParts.slice(-1)[0] === \"\") routeParts.pop();\n\n    if (route === \"/herb/dill/shamir\") setupDrag();\n\n    this.setGraphSize();\n\n    if (route)\n      if (route === \"/\") {\n        this.setState({ isHidden: false, isInteractive: true });\n\n        if (!this.state.initalLoaded) {\n          this.setState({ initalLoaded: true });\n          setTimeout(growTree, 500);\n        } else {\n          setTimeout(() => {\n            this.setState({ isMinimal: false });\n            unhighlightAll(this.state.initalLoaded);\n          }, 50);\n        }\n      } else {\n        if (routeParts[1] !== \"herb\") this.scrollToBottomCenter();\n\n        setTimeout(\n          () => {\n            growTree(0, false);\n            unhighlightAll(false);\n\n            this.setState({\n              isMinimal: true,\n              isHidden: routeParts[1] === \"recipes\",\n              isInteractive: false,\n              initalLoaded: true,\n            });\n            const herbSlug = routeParts[1] === \"herb\" ? routeParts[2] : false;\n            highlightHerb(herbSlug);\n          },\n          this.state.initalLoaded ? 0 : 1000\n        );\n      }\n  }\n\n  getLogoOpacity() {\n    const { isMinimal, isHidden, isSubtreeActive, logoOpacity } = this.state;\n    if (isMinimal || isHidden) return 0;\n    return logoOpacity;\n  }\n\n  render() {\n    const { isMinimal, isHidden, isInteractive } = this.state;\n    let classNames = \"HerbTree\";\n    if (isMinimal) classNames += \" minimal\";\n    if (isHidden) classNames += \" hidden\";\n    if (isInteractive) classNames += \" interactive\";\n    if ((isMinimal || isHidden) && this.simulation) this.simulation.stop();\n\n    return (\n      <div className={classNames} ref={this.containerRef}>\n        <h1 className=\"Logo\" style={{ opacity: this.getLogoOpacity() }}>\n          על טעם וריח\n        </h1>\n        {this.props.debug && (\n          <div className=\"DebugMenu\">\n            <button onClick={() => this.logPositions()}>Get Positions</button>\n            <button onClick={() => this.getPrintLayout()}>Print Layout</button>\n          </div>\n        )}\n        <div className=\"treeContainer\" ref={this.d3ref}>\n          <div className=\"tooltipContainer\" ref={this.tooltipRef}></div>\n        </div>\n      </div>\n    );\n  }\n}\n\nconst applyNodeOverrides = (node) => {\n  if (node.children) node.children.forEach(applyNodeOverrides);\n\n  // applyNodeOverrides\n  if (node.slug in taxonomyTreeOverrides) {\n    const overrideNode = taxonomyTreeOverrides[node.slug];\n    node.name = overrideNode.name;\n    node.rank = overrideNode.rank;\n    node.slug = overrideNode.slug;\n  }\n  return node;\n};\n\nconst removeSingleChildren = (node) => {\n  if (node.children) node.children.forEach(removeSingleChildren);\n  if (\n    node.children &&\n    node.children.length === 1 &&\n    node.rank.en !== \"Cladus\"\n  ) {\n    const { id, children, name, rank, slug } = node.children[0];\n    node.id = id;\n    node.children = children;\n    node.name = name;\n    node.rank = rank;\n    node.slug = slug;\n  }\n  return node;\n};\n\nexport default withRouter(HerbTree);\n","import React from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport Autosuggest from \"react-autosuggest\";\nimport lang from \"../../lang\";\n\nimport AutosuggestMatch from \"autosuggest-highlight/match\";\nimport AutosuggestParse from \"autosuggest-highlight/parse\";\n\nimport herbInfo from \"../../data/herbInfo.json\";\n\nimport \"./Search.scss\";\n\nconst doesContainPrefix = (str, prefix) => {\n  return str\n    .split(\" \")\n    .reduce(\n      (containsPrefix, word) =>\n        containsPrefix || word.slice(0, prefix.length) === prefix,\n      false\n    );\n};\n\nconst getMatchedName = (herb, query) => {\n  let allNames = herb.altNames[lang].split(\",\");\n  allNames.unshift(herb.commonName[lang]);\n  let enNames = herb.altNames.en.toLowerCase().split(\",\");\n  enNames.unshift(herb.commonName.en.toLowerCase());\n  enNames.push(herb.name.toLowerCase());\n  allNames = allNames.concat(enNames);\n\n  const matchIndex = allNames.findIndex((name) =>\n    doesContainPrefix(name, query)\n  );\n  const matchName = matchIndex > -1 ? allNames[matchIndex] : \"\";\n  return { matchName, matchIndex };\n};\n\nconst getMatchIndex = (herb, query) => {\n  return getMatchedName(herb, query).matchIndex;\n};\n\n// How to calculate suggestions for any given input value.\nconst getSuggestions = (value) => {\n  const inputValue = value.trim().toLowerCase();\n  const inputLength = inputValue.length;\n\n  if (inputLength <= 1) return [];\n\n  // Sort results by index of match\n  const matchedHerbs = herbInfo\n    .map((herb, i) => ({\n      herb,\n      matchIndex: getMatchIndex(herb, inputValue),\n    }))\n    .filter((herb) => herb.matchIndex > -1)\n    .sort((h1, h2) => h1.matchIndex - h2.matchIndex);\n\n  return matchedHerbs.map((herb) => herb.herb);\n};\n\n// When suggestion is clicked, Autosuggest needs to populate the input\n// based on the clicked suggestion. Teach Autosuggest how to calculate the\n// input value for every given suggestion.\nconst getSuggestionValue = (suggestion) => suggestion.commonName[lang];\n\n// Use your imagination to render suggestions.\nconst renderSuggestion = (suggestion, { query }) => {\n  query = query.toLowerCase();\n  const commonName = suggestion.commonName[lang];\n  const suggestionText = getMatchedName(suggestion, query).matchName;\n\n  const matches = AutosuggestMatch(suggestionText, query);\n  const parts = AutosuggestParse(suggestionText, matches);\n\n  return (\n    <div>\n      <span className=\"name\">\n        {parts.map((part, index) => {\n          const className = part.highlight ? \"highlight\" : \"\";\n\n          return (\n            <span className={className} key={index}>\n              {part.text}\n            </span>\n          );\n        })}\n        {suggestionText !== commonName && ` (${commonName})`}\n      </span>\n    </div>\n  );\n};\n\nclass Search extends React.Component {\n  constructor() {\n    super();\n\n    this.state = {\n      value: \"\",\n      suggestions: [],\n      highlightedSuggestion: \"\",\n    };\n  }\n\n  isSuggestionHighlighted = () => {\n    const { suggestions, highlightedSuggestion } = this.state;\n    return suggestions.some((s) => s === highlightedSuggestion);\n  };\n\n  onChange = (event, { newValue }) => {\n    this.setState({\n      value: newValue,\n    });\n  };\n\n  // Autosuggest will call this function every time you need to update suggestions.\n  onSuggestionsFetchRequested = ({ value }) => {\n    this.setState({\n      suggestions: getSuggestions(value),\n    });\n  };\n\n  // Autosuggest will call this function every time you need to clear suggestions.\n  onSuggestionsClearRequested = () => {\n    this.setState({\n      suggestions: [],\n      highlightedSuggestion: \"\",\n    });\n  };\n\n  onSuggestionSelected = (e, { suggestion }) => {\n    this.goToResult(suggestion);\n  };\n\n  onSuggestionHighlighted = ({ suggestion }) => {\n    this.setState({ highlightedSuggestion: suggestion });\n  };\n\n  goToResult = (suggestion) => {\n    this.setState({\n      value: \"\",\n      suggestions: [],\n      highlightedSuggestion: \"\",\n    });\n    this.props.history.push(`/herb/${suggestion.slug}`);\n  };\n\n  onKeyDown = (e) => {\n    if (e.key === \"Enter\") {\n      const { suggestions } = this.state;\n      if (!this.isSuggestionHighlighted() && suggestions.length > 0) {\n        this.goToResult(suggestions[0]);\n      }\n    }\n  };\n\n  render() {\n    const { value, suggestions } = this.state;\n\n    // Autosuggest will pass through all these props to the input.\n    const inputProps = {\n      placeholder: \"חיפוש צמח\",\n      value,\n      onChange: this.onChange,\n      onKeyDown: this.onKeyDown,\n    };\n\n    return (\n      <div className=\"Search\">\n        <div className=\"searchIcon\">\n          <img src=\"/herbs/images/ui/search.svg\" alt=\"Search\" />\n        </div>\n        <Autosuggest\n          suggestions={suggestions}\n          onSuggestionsFetchRequested={this.onSuggestionsFetchRequested}\n          onSuggestionsClearRequested={this.onSuggestionsClearRequested}\n          onSuggestionSelected={this.onSuggestionSelected}\n          onSuggestionHighlighted={this.onSuggestionHighlighted}\n          getSuggestionValue={getSuggestionValue}\n          renderSuggestion={renderSuggestion}\n          inputProps={inputProps}\n        />\n      </div>\n    );\n  }\n}\n\nexport default withRouter(Search);\n","import React from \"react\";\n\nimport \"./IconButton.scss\";\n\nconst IconButton = ({ icon, label, ...rest }) => {\n  return (\n    <div className=\"IconButton\">\n      <button className=\"Button\">\n        <img src={`/herbs/images/ui/${icon}.svg`} alt={label} />\n      </button>\n      <span>{label}</span>\n    </div>\n  );\n};\n\nexport default IconButton;\n","import React from \"react\";\nimport { Link, withRouter } from \"react-router-dom\";\n\nimport IconButton from \"../IconButton/IconButton\";\nimport OutLink from \"../OutLink/OutLink\";\n\nimport \"./Menu.scss\";\n\nconst Menu = (props) => {\n  let className = \"Menu\";\n  const routeParts = props.location.pathname.split(\"/\");\n  const logoOnly = routeParts[1] === \"herb\";\n  if (logoOnly) className += \" logoOnly\";\n\n  return (\n    <nav className={className}>\n      <Link to=\"/\" className=\"LogoIcon\">\n        <img src=\"/herbs/images/ui/logo.svg\" alt=\"על טעם וריח\" />\n      </Link>\n      <div className=\"IconButtonContainer\">\n        <Link to=\"/recipes\">\n          <IconButton icon=\"recipes\" label=\"מתכונים\" />\n        </Link>\n        <Link to=\"/intro\">\n          <IconButton icon=\"help\" label=\"מה זה?\" />\n        </Link>\n        <Link to=\"/about\">\n          <IconButton icon=\"about\" label=\"אודות\" />\n        </Link>\n        <OutLink href=\"https://www.instagram.com/the.herb.tree/\">\n          <img\n            src=\"/herbs/images/ui/insta.svg\"\n            className=\"instaLink\"\n            alt=\"אינסטגרם\"\n          />\n        </OutLink>\n      </div>\n    </nav>\n  );\n};\n\nexport default withRouter(Menu);\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.scss\";\nimport App from \"./App\";\nimport { BrowserRouter as Router } from \"react-router-dom\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nReactDOM.render(\n  // <React.StrictMode>\n  <Router basename=\"/herbs/\">\n    <App />\n  </Router>,\n  // </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}